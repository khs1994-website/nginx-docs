
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>ngx_http_core_module · Nginx 文档中文译版</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="DocsHome">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ngx_http_access_module.html" />
    
    

    
        <link rel="shortcut icon" href='../../favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../../favicon.ico' type="image/x-icon">
    
    
        <link rel="apple-touch-icon" href='../../favicon.ico'>
    
    
        
        <link rel="apple-touch-icon" sizes="120x120" href="../../favicon.ico">
        
        <link rel="apple-touch-icon" sizes="180x180" href="../../favicon.ico">
        
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/DocsHome" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../CONTRIBUTING.html">
            
                <a href="../../CONTRIBUTING.html">
            
                    
                    贡献导引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../">
            
                <a href="../../">
            
                    
                    介绍
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../介绍/安装nginx.html">
            
                <a href="../../介绍/安装nginx.html">
            
                    
                    安装 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../How-To/从源码构建nginx.html">
            
                <a href="../../How-To/从源码构建nginx.html">
            
                    
                    从源码构建 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../介绍/初学者指南.html">
            
                <a href="../../介绍/初学者指南.html">
            
                    
                    初学者指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <a target="_blank" href="https://docs.nginx.com/nginx/admin-guide/">
            
                    
                    管理指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../介绍/控制nginx.html">
            
                <a href="../../介绍/控制nginx.html">
            
                    
                    控制 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../介绍/连接处理方式.html">
            
                <a href="../../介绍/连接处理方式.html">
            
                    
                    连接处理方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../介绍/设置哈希.html">
            
                <a href="../../介绍/设置哈希.html">
            
                    
                    设置哈希
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../../介绍/调试日志.html">
            
                <a href="../../介绍/调试日志.html">
            
                    
                    调试日志
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../../介绍/记录日志到syslog.html">
            
                <a href="../../介绍/记录日志到syslog.html">
            
                    
                    记录日志到 syslog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../../介绍/配置文件度量单位.html">
            
                <a href="../../介绍/配置文件度量单位.html">
            
                    
                    配置文件度量单位
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="../../介绍/命令行参数.html">
            
                <a href="../../介绍/命令行参数.html">
            
                    
                    命令行参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="../../介绍/Windows下的Nginx.html">
            
                <a href="../../介绍/Windows下的Nginx.html">
            
                    
                    Windows 下的 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="../../介绍/Nginx如何处理请求.html">
            
                <a href="../../介绍/Nginx如何处理请求.html">
            
                    
                    nginx 如何处理请求
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="../../介绍/服务器名称.html">
            
                <a href="../../介绍/服务器名称.html">
            
                    
                    服务器名称
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="../../介绍/使用Nginx作为HTTP负载均衡器.html">
            
                <a href="../../介绍/使用Nginx作为HTTP负载均衡器.html">
            
                    
                    使用 nginx 作为 HTTP 负载均衡器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="../../介绍/配置HTTPS服务器.html">
            
                <a href="../../介绍/配置HTTPS服务器.html">
            
                    
                    配置 HTTPS 服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="../../介绍/Nginx如何处理TCP_UDP会话.html">
            
                <a href="../../介绍/Nginx如何处理TCP_UDP会话.html">
            
                    
                    nginx 如何处理 TCP/UDP 会话
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="../../介绍/关于nginScript.html">
            
                <a href="../../介绍/关于nginScript.html">
            
                    
                    关于 nginScript
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../其他/linux包.html">
            
                <a href="../../其他/linux包.html">
            
                    
                    Linux 软件包
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    How-To
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../How-To/在Win32平台上使用VisualC构建nginx.html">
            
                <a href="../../How-To/在Win32平台上使用VisualC构建nginx.html">
            
                    
                    在 Win32 平台上使用 Visual C 构建 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <a target="_blank" href="https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-plus-amazon-web-services/">
            
                    
                    设置 Amazon EC2 的 Nginx Plus 环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../How-To/使用DTrace_pid提供程序调试nginx.html">
            
                <a href="../../How-To/使用DTrace_pid提供程序调试nginx.html">
            
                    
                    使用 DTrace pid 提供程序调试 nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../How-To/转换重写规则.html">
            
                <a href="../../How-To/转换重写规则.html">
            
                    
                    转换重写规则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../How-To/WebSocket代理.html">
            
                <a href="../../How-To/WebSocket代理.html">
            
                    
                    WebSocket 代理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    开发
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../开发/贡献指南.html">
            
                <a href="../../开发/贡献指南.html">
            
                    
                    贡献指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    开发指南
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    模块参考
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../核心功能.html">
            
                <a href="../核心功能.html">
            
                    
                    核心功能
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <span>
            
                    
                    HTTP
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.7.1.1" data-path="ngx_http_core_module.html">
            
                <a href="ngx_http_core_module.html">
            
                    
                    ngx_http_core_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="ngx_http_access_module.html">
            
                <a href="ngx_http_access_module.html">
            
                    
                    ngx_http_access_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.3" data-path="ngx_http_addition_module.html">
            
                <a href="ngx_http_addition_module.html">
            
                    
                    ngx_http_addition_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.4" >
            
                <span>
            
                    
                    ngx_http_api_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.5" data-path="ngx_http_auth_basic_module.html">
            
                <a href="ngx_http_auth_basic_module.html">
            
                    
                    ngx_http_auth_basic_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.6" data-path="ngx_http_auth_jwt_module.html">
            
                <a href="ngx_http_auth_jwt_module.html">
            
                    
                    ngx_http_auth_jwt_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.7" data-path="ngx_http_auth_request_module.html">
            
                <a href="ngx_http_auth_request_module.html">
            
                    
                    ngx_http_auth_request_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.8" data-path="ngx_http_autoindex_module.html">
            
                <a href="ngx_http_autoindex_module.html">
            
                    
                    ngx_http_autoindex_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.9" data-path="ngx_http_browser_module.html">
            
                <a href="ngx_http_browser_module.html">
            
                    
                    ngx_http_browser_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.10" data-path="ngx_http_charset_module.html">
            
                <a href="ngx_http_charset_module.html">
            
                    
                    ngx_http_charset_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.11" data-path="ngx_http_dav_module.html">
            
                <a href="ngx_http_dav_module.html">
            
                    
                    ngx_http_dav_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.12" data-path="ngx_http_empty_gif_module.html">
            
                <a href="ngx_http_empty_gif_module.html">
            
                    
                    ngx_http_empty_gif_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.13" data-path="ngx_http_f4f_module.html">
            
                <a href="ngx_http_f4f_module.html">
            
                    
                    ngx_http_f4f_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.14" data-path="ngx_http_fastcgi_module.html">
            
                <a href="ngx_http_fastcgi_module.html">
            
                    
                    ngx_http_fastcgi_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.15" data-path="ngx_http_flv_module.html">
            
                <a href="ngx_http_flv_module.html">
            
                    
                    ngx_http_flv_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.16" data-path="ngx_http_geo_module.html">
            
                <a href="ngx_http_geo_module.html">
            
                    
                    ngx_http_geo_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.17" data-path="ngx_http_geoip_module.html">
            
                <a href="ngx_http_geoip_module.html">
            
                    
                    ngx_http_geoip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.18" data-path="ngx_http_grpc_module.html">
            
                <a href="ngx_http_grpc_module.html">
            
                    
                    ngx_http_grpc_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.19" data-path="ngx_http_gunzip_module.html">
            
                <a href="ngx_http_gunzip_module.html">
            
                    
                    ngx_http_gunzip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.20" data-path="ngx_http_gzip_module.html">
            
                <a href="ngx_http_gzip_module.html">
            
                    
                    ngx_http_gzip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.21" data-path="ngx_http_gzip_static_module.html">
            
                <a href="ngx_http_gzip_static_module.html">
            
                    
                    ngx_http_gzip_static_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.22" data-path="ngx_http_headers_module.html">
            
                <a href="ngx_http_headers_module.html">
            
                    
                    ngx_http_headers_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.23" data-path="ngx_http_hls_module.html">
            
                <a href="ngx_http_hls_module.html">
            
                    
                    ngx_http_hls_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.24" data-path="ngx_http_image_filter_module.html">
            
                <a href="ngx_http_image_filter_module.html">
            
                    
                    ngx_http_image_filter_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.25" data-path="ngx_http_index_module.html">
            
                <a href="ngx_http_index_module.html">
            
                    
                    ngx_http_index_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.26" data-path="ngx_http_js_module.html">
            
                <a href="ngx_http_js_module.html">
            
                    
                    ngx_http_js_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.27" data-path="ngx_http_keyval_module.html">
            
                <a href="ngx_http_keyval_module.html">
            
                    
                    ngx_http_keyval_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.28" data-path="ngx_http_limit_conn_module.html">
            
                <a href="ngx_http_limit_conn_module.html">
            
                    
                    ngx_http_limit_conn_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.29" data-path="ngx_http_limit_req_module.html">
            
                <a href="ngx_http_limit_req_module.html">
            
                    
                    ngx_http_limit_req_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.30" data-path="ngx_http_log_module.html">
            
                <a href="ngx_http_log_module.html">
            
                    
                    ngx_http_log_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.31" data-path="ngx_http_map_module.html">
            
                <a href="ngx_http_map_module.html">
            
                    
                    ngx_http_map_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.32" data-path="ngx_http_memcached_module.html">
            
                <a href="ngx_http_memcached_module.html">
            
                    
                    ngx_http_memcached_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.33" data-path="ngx_http_mirror_module.html">
            
                <a href="ngx_http_mirror_module.html">
            
                    
                    ngx_http_mirror_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.34" data-path="ngx_http_mp4_module.html">
            
                <a href="ngx_http_mp4_module.html">
            
                    
                    ngx_http_mp4_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.35" data-path="ngx_http_perl_module.html">
            
                <a href="ngx_http_perl_module.html">
            
                    
                    ngx_http_perl_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.36" data-path="ngx_http_proxy_module.html">
            
                <a href="ngx_http_proxy_module.html">
            
                    
                    ngx_http_proxy_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.37" data-path="ngx_http_random_index_module.html">
            
                <a href="ngx_http_random_index_module.html">
            
                    
                    ngx_http_random_index_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.38" data-path="ngx_http_realip_module.html">
            
                <a href="ngx_http_realip_module.html">
            
                    
                    ngx_http_realip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.39" data-path="ngx_http_referer_module.html">
            
                <a href="ngx_http_referer_module.html">
            
                    
                    ngx_http_referer_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.40" data-path="ngx_http_rewrite_module.html">
            
                <a href="ngx_http_rewrite_module.html">
            
                    
                    ngx_http_rewrite_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.41" data-path="ngx_http_scgi_module.html">
            
                <a href="ngx_http_scgi_module.html">
            
                    
                    ngx_http_scgi_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.42" data-path="ngx_http_secure_link_module.html">
            
                <a href="ngx_http_secure_link_module.html">
            
                    
                    ngx_http_secure_link_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.43" data-path="ngx_http_session_log_module.html">
            
                <a href="ngx_http_session_log_module.html">
            
                    
                    ngx_http_session_log_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.44" data-path="ngx_http_slice_module.html">
            
                <a href="ngx_http_slice_module.html">
            
                    
                    ngx_http_slice_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.45" data-path="ngx_http_spdy_module.html">
            
                <a href="ngx_http_spdy_module.html">
            
                    
                    ngx_http_spdy_module（过时）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.46" data-path="ngx_http_split_clients_module.html">
            
                <a href="ngx_http_split_clients_module.html">
            
                    
                    ngx_http_split_clients_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.47" data-path="ngx_http_ssi_module.html">
            
                <a href="ngx_http_ssi_module.html">
            
                    
                    ngx_http_ssi_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.48" data-path="ngx_http_ssl_module.html">
            
                <a href="ngx_http_ssl_module.html">
            
                    
                    ngx_http_ssl_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.49" data-path="ngx_http_status_module.html">
            
                <a href="ngx_http_status_module.html">
            
                    
                    ngx_http_status_module（过时）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.50" data-path="ngx_http_stub_status_module.html">
            
                <a href="ngx_http_stub_status_module.html">
            
                    
                    ngx_http_stub_status_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.51" data-path="ngx_http_sub_module.html">
            
                <a href="ngx_http_sub_module.html">
            
                    
                    ngx_http_sub_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.52" data-path="ngx_http_upstream_module.html">
            
                <a href="ngx_http_upstream_module.html">
            
                    
                    ngx_http_upstream_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.53" data-path="ngx_http_upstream_conf_module.html">
            
                <a href="ngx_http_upstream_conf_module.html">
            
                    
                    ngx_http_upstream_conf_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.54" data-path="ngx_http_upstream_hc_module.html">
            
                <a href="ngx_http_upstream_hc_module.html">
            
                    
                    ngx_http_upstream_hc_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.55" data-path="ngx_http_userid_module.html">
            
                <a href="ngx_http_userid_module.html">
            
                    
                    ngx_http_userid_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.56" data-path="ngx_http_uwsgi_module.html">
            
                <a href="ngx_http_uwsgi_module.html">
            
                    
                    ngx_http_uwsgi_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.57" data-path="ngx_http_v2_module.html">
            
                <a href="ngx_http_v2_module.html">
            
                    
                    ngx_http_v2_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.58" data-path="ngx_http_xslt_module.html">
            
                <a href="ngx_http_xslt_module.html">
            
                    
                    ngx_http_xslt_module
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" >
            
                <span>
            
                    
                    Mail
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../mail/ngx_mail_core_module.html">
            
                <a href="../mail/ngx_mail_core_module.html">
            
                    
                    ngx_mail_core_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="../mail/ngx_mail_auth_http_module.html">
            
                <a href="../mail/ngx_mail_auth_http_module.html">
            
                    
                    ngx_mail_auth_http_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.3" data-path="../mail/ngx_mail_proxy_module.html">
            
                <a href="../mail/ngx_mail_proxy_module.html">
            
                    
                    ngx_mail_proxy_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.4" >
            
                <span>
            
                    
                    ngx_mail_ssl_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.5" data-path="../mail/ngx_mail_imap_module.html">
            
                <a href="../mail/ngx_mail_imap_module.html">
            
                    
                    ngx_mail_imap_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.6" data-path="../mail/ngx_mail_pop3_module.html">
            
                <a href="../mail/ngx_mail_pop3_module.html">
            
                    
                    ngx_mail_pop3_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.7" data-path="../mail/ngx_mail_smtp_module.html">
            
                <a href="../mail/ngx_mail_smtp_module.html">
            
                    
                    ngx_mail_smtp_module
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" >
            
                <span>
            
                    
                    Stream
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../stream/ngx_stream_core_module.html">
            
                <a href="../stream/ngx_stream_core_module.html">
            
                    
                    ngx_stream_core_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="../stream/ngx_stream_access_module.html">
            
                <a href="../stream/ngx_stream_access_module.html">
            
                    
                    ngx_stream_access_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3" data-path="../stream/ngx_stream_geo_module.html">
            
                <a href="../stream/ngx_stream_geo_module.html">
            
                    
                    ngx_stream_geo_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4" data-path="../stream/ngx_stream_geoip_module.html">
            
                <a href="../stream/ngx_stream_geoip_module.html">
            
                    
                    ngx_stream_geoip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.5" data-path="../stream/ngx_stream_js_module.html">
            
                <a href="../stream/ngx_stream_js_module.html">
            
                    
                    ngx_stream_js_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.6" >
            
                <span>
            
                    
                    ngx_stream_keyval_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.7" data-path="../stream/ngx_stream_limit_conn_module.html">
            
                <a href="../stream/ngx_stream_limit_conn_module.html">
            
                    
                    ngx_stream_limit_conn_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.8" data-path="../stream/ngx_stream_log_module.html">
            
                <a href="../stream/ngx_stream_log_module.html">
            
                    
                    ngx_stream_log_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.9" >
            
                <span>
            
                    
                    ngx_stream_map_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.10" >
            
                <span>
            
                    
                    ngx_stream_proxy_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.11" data-path="../stream/ngx_stream_realip_module.html">
            
                <a href="../stream/ngx_stream_realip_module.html">
            
                    
                    ngx_stream_realip_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.12" data-path="../stream/ngx_stream_return_module.html">
            
                <a href="../stream/ngx_stream_return_module.html">
            
                    
                    ngx_stream_return_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.13" data-path="../stream/ngx_stream_split_clients_module.html">
            
                <a href="../stream/ngx_stream_split_clients_module.html">
            
                    
                    ngx_stream_split_clients_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.14" >
            
                <span>
            
                    
                    ngx_stream_ssl_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.15" data-path="../stream/ngx_stream_ssl_preread_module.html">
            
                <a href="../stream/ngx_stream_ssl_preread_module.html">
            
                    
                    ngx_stream_ssl_preread_module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.16" >
            
                <span>
            
                    
                    ngx_stream_upstream_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.17" >
            
                <span>
            
                    
                    ngx_stream_upstream_hc_module
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.18" >
            
                <span>
            
                    
                    ngx_stream_zone_sync_module
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" >
            
                <span>
            
                    
                    其他
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../google/ngx_google_perftools_module.html">
            
                <a href="../google/ngx_google_perftools_module.html">
            
                    
                    ngx_google_perftools_module
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >ngx_http_core_module</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ngxhttpcoremodule">ngx_http_core_module</h1>
<ul>
<li><a href="#directives">&#x6307;&#x4EE4;</a><ul>
<li><a href="#absolute_redirect">absolute_redirect</a></li>
<li><a href="#aio">aio</a></li>
<li><a href="#aio_write">aio_write</a></li>
<li><a href="#alias">alias</a></li>
<li><a href="#chunked_transfer_encoding">chunked_transfer_encoding</a></li>
<li><a href="#client_body_buffer_size">client_body_buffer_size</a></li>
<li><a href="#client_body_in_file_only">client_body_in_file_only</a></li>
<li><a href="#client_body_in_single_buffer">client_body_in_single_buffer</a></li>
<li><a href="#client_body_temp_path">client_body_temp_path</a></li>
<li><a href="#client_body_timeout">client_body_timeout</a></li>
<li><a href="#client_header_buffer_size">client_header_buffer_size</a></li>
<li><a href="#client_header_timeout">client_header_timeout</a></li>
<li><a href="#client_max_body_size">client_max_body_size</a></li>
<li><a href="#connection_pool_size">connection_pool_size</a></li>
<li><a href="#default_type">default_type</a></li>
<li><a href="#directio">directio</a></li>
<li><a href="#directio_alignment">directio_alignment</a></li>
<li><a href="#disable_symlinks">disable_symlinks</a></li>
<li><a href="#error_page">error_page</a></li>
<li><a href="#etag">etag</a></li>
<li><a href="#http">http</a></li>
<li><a href="#if_modified_since">if_modified_since</a></li>
<li><a href="#ignore_invalid_headers">ignore_invalid_headers</a></li>
<li><a href="#internal">internal</a></li>
<li><a href="#keepalive_disable">keepalive_disable</a></li>
<li><a href="#keepalive_requests">keepalive_requests</a></li>
<li><a href="#keepalive_timeout">keepalive_timeout</a></li>
<li><a href="#large_client_header_buffers">large_client_header_buffers</a></li>
<li><a href="#limit_except">limit_except</a></li>
<li><a href="#limit_rate">limit_rate</a></li>
<li><a href="#limit_rate_after">limit_rate_after</a></li>
<li><a href="#lingering_close">lingering_close</a></li>
<li><a href="#lingering_time">lingering_time</a></li>
<li><a href="#lingering_timeout">lingering_timeout</a></li>
<li><a href="#listen">listen</a></li>
<li><a href="#location">location</a></li>
<li><a href="#log_not_found">log_not_found</a></li>
<li><a href="#log_subrequest">log_subrequest</a></li>
<li><a href="#max_ranges">max_ranges</a></li>
<li><a href="#merge_slashes">merge_slashes</a></li>
<li><a href="#msie_padding">msie_padding</a></li>
<li><a href="#msie_refresh">msie_refresh</a></li>
<li><a href="#open_file_cache">open_file_cache</a></li>
<li><a href="#open_file_cache_errors">open_file_cache_errors</a></li>
<li><a href="#open_file_cache_min_uses">open_file_cache_min_uses</a></li>
<li><a href="#open_file_cache_valid">open_file_cache_valid</a></li>
<li><a href="#output_buffers">output_buffers</a></li>
<li><a href="#port_in_redirect">port_in_redirect</a></li>
<li><a href="#postpone_output">postpone_output</a></li>
<li><a href="#read_ahead">read_ahead</a></li>
<li><a href="#recursive_error_pages">recursive_error_pages</a></li>
<li><a href="#request_pool_size">request_pool_size</a></li>
<li><a href="#reset_timedout_connection">reset_timedout_connection</a></li>
<li><a href="#resolver">resolver</a></li>
<li><a href="#resolver_timeout">resolver_timeout</a></li>
<li><a href="#root">root</a></li>
<li><a href="#satisfy">satisfy</a></li>
<li><a href="#send_lowat">send_lowat</a></li>
<li><a href="#send_timeout">send_timeout</a></li>
<li><a href="#sendfile">sendfile</a></li>
<li><a href="#sendfile_max_chunk">sendfile_max_chunk</a></li>
<li><a href="#server">server</a></li>
<li><a href="#server_name">server_name</a></li>
<li><a href="#server_name_in_redirect">server_name_in_redirect</a></li>
<li><a href="#server_names_hash_bucket_size">server_names_hash_bucket_size</a></li>
<li><a href="#server_names_hash_max_size">server_names_hash_max_size</a></li>
<li><a href="#server_tokens">server_tokens</a></li>
<li><a href="#tcp_nodelay">tcp_nodelay</a></li>
<li><a href="#tcp_nopush">tcp_nopush</a></li>
<li><a href="#try_files">try_files</a></li>
<li><a href="#types">types</a></li>
<li><a href="#types_hash_bucket_size">types_hash_bucket_size</a></li>
<li><a href="#types_hash_max_size">types_hash_max_size</a></li>
<li><a href="#underscores_in_headers">underscores_in_headers</a></li>
<li><a href="#variables_hash_bucket_size">variables_hash_bucket_size</a></li>
<li><a href="#variables_hash_max_size">variables_hash_max_size</a></li>
</ul>
</li>
<li><a href="#embedded_variables">&#x5185;&#x5D4C;&#x53D8;&#x91CF;</a></li>
</ul>
<p><a id="directives"></a></p>
<h2 id="&#x6307;&#x4EE4;">&#x6307;&#x4EE4;</h2>
<h3 id="absoluteredirect">absolute_redirect</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>absolute_redirect</strong> <code>on</code> | <code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">absolute_redirect on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 1.11.8 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x5982;&#x679C;&#x7981;&#x7528;&#xFF0C;nginx &#x53D1;&#x51FA;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x5C06;&#x662F;&#x76F8;&#x5BF9;&#x7684;&#x3002;</p>
<p>&#x53E6;&#x8BF7;&#x53C2;&#x9605; <a href="#server_name_in_redirect">server_name_in_redirect</a> &#x548C; <a href="#port_in_redirect">port_in_redirect</a> &#x6307;&#x4EE4;&#x3002;</p>
<h3 id="aio">aio</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>aio</strong> <code>on</code> | <code>off</code> | <code>threads[=pool]</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">aio off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 0.8.11 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5728; FreeBSD &#x548C; Linux &#x4E0A;&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x6587;&#x4EF6; I/O&#xFF08;AIO&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>video<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">aio</span>            on<span class="token punctuation">;</span>
    output_buffers <span class="token number">1</span> <span class="token number">64</span>k<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728; FreeBSD &#x4E0A;&#xFF0C;AIO &#x4ECE; FreeBSD 4.3 &#x5F00;&#x59CB;&#x53EF;&#x7528;&#x3002;&#x5728; FreeBSD 11.0 &#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06; AIO &#x9759;&#x6001;&#x94FE;&#x63A5;&#x5230;&#x5185;&#x6838;&#x4E2D;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx">options VFS_AIO
</code></pre>
<p>&#x6216;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5185;&#x6838;&#x53EF;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx">kldload <span class="token keyword">aio</span>
</code></pre>
<p>&#x5728; Linux &#x4E0A;&#xFF0C;AIO &#x4ECE;&#x5185;&#x6838;&#x7248;&#x672C;&#x4E3A; 2.6.22 &#x5F00;&#x59CB;&#x53EF;&#x7528;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6709;&#x5FC5;&#x8981;&#x542F;&#x7528; <a href="#directio">directio</a>&#xFF0C;&#x5426;&#x5219;&#x8BFB;&#x53D6;&#x5C06;&#x88AB;&#x963B;&#x585E;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>video<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">aio</span>            on<span class="token punctuation">;</span>
    <span class="token keyword">directio</span>       <span class="token number">512</span><span class="token punctuation">;</span>
    output_buffers <span class="token number">1</span> <span class="token number">128</span>k<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728; Linux &#x4E0A;&#xFF0C;<a href="#directio">directio</a> &#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x8BFB;&#x53D6; 512 &#x5B57;&#x8282;&#x8FB9;&#x754C;&#x5BF9;&#x9F50;&#x7684;&#x5757;&#xFF08;&#x6216; XFS 4K&#xFF09;&#x3002;&#x6587;&#x4EF6;&#x672A;&#x5BF9;&#x9F50;&#x7684;&#x672B;&#x7AEF;&#x4EE5;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x8BFB;&#x53D6;&#x3002;&#x5BF9;&#x4E8E;&#x5B57;&#x8282;&#x8303;&#x56F4;&#x8BF7;&#x6C42;&#x548C;&#x4E0D;&#x662F;&#x4ECE;&#x6587;&#x4EF6;&#x5F00;&#x5934;&#x5F00;&#x59CB;&#x7684; FLV &#x8BF7;&#x6C42;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF1A;&#x5728;&#x6587;&#x4EF6;&#x7684;&#x5F00;&#x5934;&#x548C;&#x7ED3;&#x5C3E;&#x8BFB;&#x53D6;&#x672A;&#x5BF9;&#x9F50;&#x7684;&#x6570;&#x636E;&#x5C06;&#x88AB;&#x963B;&#x585E;&#x3002;</p>
<p>&#x5F53;&#x5728; Linux &#x4E0A;&#x542F;&#x7528; AIO &#x548C; <a href="#sendfile">sendfile</a> &#x65F6;&#xFF0C;AIO &#x7528;&#x4E8E;&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E; <a href="#directio">directio</a> &#x6307;&#x4EE4;&#x6307;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C; <a href="#sendfile">sendfile</a> &#x7528;&#x4E8E;&#x8F83;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#xFF08;&#x7981;&#x7528; <a href="#directio">directio</a> &#x65F6;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF09;&#x3002;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>video<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">sendfile</span>       on<span class="token punctuation">;</span>
    <span class="token keyword">aio</span>            on<span class="token punctuation">;</span>
    <span class="token keyword">directio</span>       <span class="token number">8</span>m<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6700;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#xFF08;1.7.11&#xFF09;&#x8BFB;&#x53D6;&#x548C;<a href="#sendfile">&#x53D1;&#x9001;</a>&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>video<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">sendfile</span>       on<span class="token punctuation">;</span>
    <span class="token keyword">aio</span>            threads<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8BFB;&#x53D6;&#x548C;&#x53D1;&#x9001;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x88AB;&#x5378;&#x8F7D;&#x5230;&#x6307;&#x5B9A;<a href="#thread_pool">&#x6C60;</a>&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x7701;&#x7565;&#x6C60;&#x540D;&#x79F0;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x540D;&#x79F0;&#x4E3A; <code>default</code> &#x7684;&#x6C60;&#x3002;&#x6C60;&#x540D;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x53D8;&#x91CF;&#x8BBE;&#x7F6E;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">aio</span> threads<span class="token operator">=</span>pool<span class="token variable">$disk</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x662F;&#x7981;&#x7528;&#x72B6;&#x6001;&#xFF0C;&#x5B83;&#x5E94;&#x8BE5;&#x4F7F;&#x7528; <code>--with-threads</code> &#x914D;&#x7F6E;&#x53C2;&#x6570;&#x542F;&#x7528;&#x3002;&#x76EE;&#x524D;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x4EC5;&#x4E0E; <a href="http://nginx.org/en/docs/events.html#epoll" target="_blank">epoll</a>&#x3001;<a href="http://nginx.org/en/docs/events.html#kqueue" target="_blank">kqueue</a> &#x548C; <a href="http://nginx.org/en/docs/events.html#eventport" target="_blank">eventport</a> &#x65B9;&#x5F0F;&#x517C;&#x5BB9;&#x3002;&#x4EC5;&#x5728; Linux &#x4E0A;&#x652F;&#x6301;&#x591A;&#x7EBF;&#x7A0B;&#x53D1;&#x9001;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x53E6;&#x8BF7;&#x53C2;&#x89C1; <a href="#sendfile">sendfile</a> &#x6307;&#x4EE4;&#x3002;</p>
<h3 id="aiowrite">aio_write</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>aio_write</strong> <code>on</code> | <code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">aio_write off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 1.9.13 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x5982;&#x679C;&#x542F;&#x7528; <a href="#aio">aio</a>&#xFF0C;&#x5219;&#x6307;&#x5B9A;&#x662F;&#x5426;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x3002;&#x76EE;&#x524D;&#xFF0C;&#x8FD9;&#x4EC5;&#x5728;&#x4F7F;&#x7528; aio &#x7EBF;&#x7A0B;&#x65F6;&#x6709;&#x6548;&#xFF0C;&#x5E76;&#x4E14;&#x4EC5;&#x9650;&#x4E8E;&#x5C06;&#x4ECE;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x3002;</p>
<h3 id="alias">alias</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>alias</strong> <code>path</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">location</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x6307;&#x5B9A; location &#x7684;&#x66FF;&#x6362;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>i<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">alias</span> <span class="token operator">/</span>data<span class="token operator">/</span>w3<span class="token operator">/</span>images<span class="token operator">/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>/i/top.gif</code> &#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5C06;&#x53D1;&#x9001; <code>/data/w3/images/top.gif</code> &#x6587;&#x4EF6;&#x3002;</p>
<p><code>path</code> &#x503C;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x53D8;&#x91CF;&#xFF0C;&#x9664; <code>$document_root</code> &#x548C; <code>$realpath_root</code> &#x5916;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5B9A;&#x4E49;&#x7684; location &#x5185;&#x4F7F;&#x7528;&#x4E86;&#x522B;&#x540D;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x79CD;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x6355;&#x83B7;&#xFF0C;&#x5E76;&#x4E14;&#x522B;&#x540D;&#x5E94;&#x8BE5;&#x5F15;&#x7528;&#x8FD9;&#x4E9B;&#x6355;&#x83B7;&#xFF08;0.7.40&#xFF09;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">~</span> <span class="token operator">^</span><span class="token operator">/</span>users<span class="token operator">/</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token punctuation">:</span>gif<span class="token operator">|</span>jpe<span class="token operator">?</span>g<span class="token operator">|</span>png<span class="token punctuation">)</span><span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    <span class="token keyword">alias</span> <span class="token operator">/</span>data<span class="token operator">/</span>w3<span class="token operator">/</span>images<span class="token operator">/</span>$<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5F53; location &#x4E0E;&#x6307;&#x4EE4;&#x503C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x5339;&#x914D;&#x65F6;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>images<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">alias</span> <span class="token operator">/</span>data<span class="token operator">/</span>w3<span class="token operator">/</span>images<span class="token operator">/</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x66F4;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528; <a href="#root">root</a> &#x6307;&#x4EE4;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>images<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">root</span> <span class="token operator">/</span>data<span class="token operator">/</span>w3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="chunkedtransferencoding">chunked_transfer_encoding</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>chunked_transfer_encoding</strong> <code>on</code> | <code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">chunked_transfer_encoding on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5141;&#x8BB8;&#x5728; HTTP/1.1 &#x4E2D;&#x7981;&#x7528;&#x5206;&#x5757;&#x4F20;&#x8F93;&#x7F16;&#x7801;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x8F6F;&#x4EF6;&#x672A;&#x80FD;&#x652F;&#x6301;&#x5206;&#x5757;&#x7F16;&#x7801;&#x65F6;&#x5B83;&#x53EF;&#x80FD;&#x4F1A;&#x6D3E;&#x4E0A;&#x7528;&#x573A;&#x3002;</p>
<h3 id="clientbodybuffersize">client_body_buffer_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_body_buffer_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_body_buffer_size 8k</td>
<td>16k;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4F53;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4F53;&#x5927;&#x4E8E;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5219;&#x6574;&#x4E2A;&#x4F53;&#x6216;&#x4EC5;&#x5C06;&#x5176;&#x90E8;&#x5206;&#x5199;&#x5165;<a href="#client_body_temp_path">&#x4E34;&#x65F6;&#x6587;&#x4EF6;</a>&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x7B49;&#x4E8E;&#x4E24;&#x4E2A;&#x5185;&#x5B58;&#x9875;&#x3002;&#x5728; x86&#x3001;&#x5176;&#x4ED6; 32 &#x4F4D;&#x5E73;&#x53F0;&#x548C; x86-64 &#x4E0A;&#x662F; 8K&#x3002;&#x5728;&#x5176;&#x4ED6; 64 &#x4F4D;&#x5E73;&#x53F0;&#x4E0A;&#x901A;&#x5E38;&#x4E3A; 16K&#x3002;</p>
<h3 id="clientbodyinfileonly">client_body_in_file_only</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_body_in_file_only</strong> <code>on</code> | <code>clean</code> | <code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_body_in_file_only off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x786E;&#x5B9A; nginx &#x662F;&#x5426;&#x5E94;&#x5C06;&#x6574;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4F53;&#x4FDD;&#x5B58;&#x5230;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x8BD5;&#x671F;&#x95F4;&#x6216;&#x4F7F;&#x7528; <code>$request_body_file</code> &#x53D8;&#x91CF;&#x6216;&#x6A21;&#x5757; <a href="ngx_http_perl_module.html">ngx_http_perl_module</a> &#x7684; <a href="ngx_http_perl_module.html#methods">$r-&gt;request_body_file</a> &#x65B9;&#x6CD5;&#x65F6;&#x4F7F;&#x7528;&#x6B64;&#x6307;&#x4EE4;&#x3002;</p>
<p>&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A; <code>on</code> &#x503C;&#x65F6;&#xFF0C;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x5728;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x540E;&#x4E0D;&#x4F1A;&#x88AB;&#x5220;&#x9664;&#x3002;</p>
<p>&#x503C; <code>clean</code> &#x4F1A;&#x5C06;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x540E;&#x5269;&#x4E0B;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x5220;&#x9664;&#x3002;</p>
<h3 id="clientbodyinsinglebuffer">client_body_in_single_buffer</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_body_in_single_buffer</strong> <code>on</code> | <code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_body_in_single_buffer off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x786E;&#x5B9A; nginx &#x662F;&#x5426;&#x5E94;&#x5C06;&#x6574;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4F53;&#x4FDD;&#x5B58;&#x5728;&#x5355;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x3002;&#x5728;&#x4F7F;&#x7528; <code>$request_body</code> &#x53D8;&#x91CF;&#x65F6;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x8BE5;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x6D89;&#x53CA;&#x7684;&#x590D;&#x5236;&#x64CD;&#x4F5C;&#x6B21;&#x6570;&#x3002;</p>
<h3 id="clientbodytemppath">client_body_temp_path</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_body_temp_path</strong> <code>path [level1 [level2 [level3]]]</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_body_temp_path client_body_temp;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x6301;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4E3B;&#x4F53;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5728;&#x6307;&#x5B9A;&#x76EE;&#x5F55;&#x4E0B;&#x4F7F;&#x7528;&#x4E09;&#x7EA7;&#x5B50;&#x76EE;&#x5F55;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x3002;&#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">client_body_temp_path</span> <span class="token operator">/</span>spool<span class="token operator">/</span>nginx<span class="token operator">/</span>client_temp <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token operator">/</span>spool<span class="token operator">/</span>nginx<span class="token operator">/</span>client_temp<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span><span class="token number">45</span><span class="token operator">/</span><span class="token number">00000123457</span>
</code></pre>
<h3 id="clientbodytimeout">client_body_timeout</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_body_timeout</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_body_timeout 60s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x6B63;&#x6587;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;&#x4EC5;&#x662F;&#x5728;&#x4E24;&#x4E2A;&#x8FDE;&#x7EED;&#x8BFB;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6574;&#x4E2A;&#x8BF7;&#x6C42;&#x4F53;&#x7684;&#x4F20;&#x8F93;&#x8FC7;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6B64;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x53D1;&#x9001;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#xFF0C;&#x5219;&#x4F1A;&#x5C06; 408&#xFF08;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#xFF09;&#x9519;&#x8BEF;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<h3 id="clientheaderbuffersize">client_header_buffer_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_header_buffer_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_header_buffer_size 1k;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5934;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x8BF7;&#x6C42;&#xFF0C;1K &#x5B57;&#x8282;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4E2D;&#x5305;&#x542B;&#x957F; cookie&#xFF0C;&#x6216;&#x8005;&#x6765;&#x81EA; WAP &#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5219;&#x53EF;&#x80FD; 1K &#x662F;&#x4E0D;&#x9002;&#x7528;&#x7684;&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x884C;&#x6216;&#x8BF7;&#x6C42;&#x5934;&#x57DF;&#x4E0D;&#x9002;&#x5408;&#x6B64;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5219;&#x4F1A;&#x5206;&#x914D;&#x7531; <a href="#large_client_header_buffers">large_client_header_buffers</a> &#x6307;&#x4EE4;&#x914D;&#x7F6E;&#x7684;&#x8F83;&#x5927;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<h3 id="clientheadertimeout">client_header_timeout</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_header_timeout</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_header_timeout 60s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5934;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x4F20;&#x8F93;&#x6574;&#x4E2A;&#x62A5;&#x5934;&#xFF0C;&#x5219;&#x5C06; 408&#xFF08;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#xFF09;&#x9519;&#x8BEF;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<h3 id="clientmaxbodysize">client_max_body_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>client_header_timeout</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">client_max_body_size 1m;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5728; <strong>Content-Length</strong> &#x8BF7;&#x6C42;&#x5934;&#x57DF;&#x4E2D;&#x6307;&#x5B9A;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4F53;&#x7684;&#x6700;&#x5927;&#x5141;&#x8BB8;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x7684;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x914D;&#x7F6E;&#x503C;&#xFF0C;&#x5219;&#x5C06; 413 &#xFF08;&#x8BF7;&#x6C42;&#x5B9E;&#x4F53;&#x8FC7;&#x5927;&#xFF09;&#x9519;&#x8BEF;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x663E;&#x793A;&#x6B64;&#x9519;&#x8BEF;&#x3002;&#x5C06;  <code>size</code> &#x8BBE;&#x7F6E;&#x4E3A; 0 &#x5C06;&#x7981;&#x7528;&#x68C0;&#x67E5;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x6B63;&#x6587;&#x5927;&#x5C0F;&#x3002;</p>
<h3 id="connectionpoolsize">connection_pool_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>connection_pool_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">connection_pool_size 256</td>
<td>512;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x5141;&#x8BB8;&#x7CBE;&#x786E;&#x8C03;&#x6574;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x5185;&#x5B58;&#x5206;&#x914D;&#x3002;&#x8BE5;&#x6307;&#x4EE4;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x6700;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;32 &#x4F4D;&#x5E73;&#x53F0;&#x4E0A;&#x7684;&#x5927;&#x5C0F;&#x4E3A; 256 &#x5B57;&#x8282;&#xFF0C;64 &#x4F4D;&#x5E73;&#x53F0;&#x4E0A;&#x4E3A; 512 &#x5B57;&#x8282;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.9.8 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x6240;&#x6709;&#x5E73;&#x53F0;&#x4E0A;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x90FD;&#x4E3A; 256&#x3002;</p>
</blockquote>
<h3 id="defaulttype">default_type</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>default_type</strong> <code>mime-type</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">default_type text/plain;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x54CD;&#x5E94;&#x7684;&#x9ED8;&#x8BA4; MIME &#x7C7B;&#x578B;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="#types">types</a> &#x6307;&#x4EE4;&#x5BF9; MIME &#x7C7B;&#x578B;&#x7684;&#x6587;&#x4EF6;&#x6269;&#x5C55;&#x540D;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#x3002;</p>
<h3 id="directio">directio</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>directio</strong> <code>size</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">directio off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5F00;&#x542F;&#x5F53;&#x8BFB;&#x53D6;&#x5927;&#x4E8E;&#x6216;&#x7B49;&#x4E8E;&#x6307;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>O_DIRECT</code> &#x6807;&#x5FD7;&#xFF08;FreeBSD&#x3001;Linux&#xFF09;&#x3001;<code>F_NOCACHE</code> &#x6807;&#x5FD7;&#xFF08;macOS&#xFF09;&#x6216; <code>directio()</code> &#x51FD;&#x6570;&#xFF08;Solaris&#xFF09;&#x3002;&#x8BE5;&#x6307;&#x4EE4;&#x81EA;&#x52A8;&#x7981;&#x7528;&#xFF08;0.7.15&#xFF09;&#x7ED9;&#x5B9A;&#x8BF7;&#x6C42;&#x4F7F;&#x7528;&#x7684; <a href="#sendfile">sendfile</a>&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x5927;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">directio</span> <span class="token number">4</span>m<span class="token punctuation">;</span>
</code></pre>
<p>&#x6216;&#x5F53;&#x5728; Linux &#x4E0A;&#x4F7F;&#x7528; <a href="#aio">aio</a> &#x65F6;&#x3002;</p>
<h3 id="directioalignment">directio_alignment</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>directio_alignment</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">directio_alignment 512;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 0.8.11 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E; <a href="#directio">directio</a> &#x7684;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;512 &#x5B57;&#x8282;&#x7684;&#x5BF9;&#x9F50;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5728; Linux &#x4E0B;&#x4F7F;&#x7528; XFS &#x65F6;&#xFF0C;&#x9700;&#x8981;&#x589E;&#x52A0;&#x5230; 4K&#x3002;</p>
<h3 id="disablesymlinks">disable_symlinks</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>disable_symlinks</strong> <code>off</code>; <br> <strong>disable_symlinks on</strong> \</td>
<td><code>if_not_owner [from=part]</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">disable_symlinks off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 1.1.15 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x786E;&#x5B9A;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x65F6;&#x5E94;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF1A;</p>
<ul>
<li><p><code>off</code></p>
<p>  &#x5141;&#x8BB8;&#x8DEF;&#x5F84;&#x540D;&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#xFF0C;&#x4E0D;&#x6267;&#x884C;&#x68C0;&#x67E5;&#x3002;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x3002;</p>
</li>
<li><p><code>on</code></p>
<p>  &#x5982;&#x679C;&#x8DEF;&#x5F84;&#x540D;&#x5B58;&#x5728;&#x662F;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x5219;&#x62D2;&#x7EDD;&#x5BF9;&#x6587;&#x4EF6;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
</li>
<li><p><code>if_not_owner</code></p>
<p>  &#x5982;&#x679C;&#x8DEF;&#x5F84;&#x540D;&#x5B58;&#x5728;&#x662F;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x94FE;&#x63A5;&#x6307;&#x5411;&#x7684;&#x94FE;&#x63A5;&#x548C;&#x5BF9;&#x8C61;&#x4E3A;&#x4E0D;&#x540C;&#x6240;&#x6709;&#x8005;&#xFF0C;&#x5219;&#x62D2;&#x7EDD;&#x8BBF;&#x95EE;&#x6587;&#x4EF6;&#x3002;</p>
</li>
<li><p><code>from=part</code></p>
<p>  &#x5F53;&#x68C0;&#x67E5;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF08;&#x53C2;&#x6570; <code>on</code> &#x548C; <code>if_not_owner</code>&#xFF09;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x68C0;&#x67E5;&#x8DEF;&#x5F84;&#x540D;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53E6;&#x5916;&#x6307;&#x5B9A; <code>from=part</code> &#x53C2;&#x6570;&#x6765;&#x907F;&#x514D;&#x68C0;&#x67E5;&#x8DEF;&#x5F84;&#x540D;&#x7684;&#x521D;&#x59CB;&#x90E8;&#x5206;&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EA;&#x80FD;&#x4ECE;&#x6307;&#x5B9A;&#x7684;&#x521D;&#x59CB;&#x90E8;&#x5206;&#x540E;&#x9762;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#x7EC4;&#x4EF6;&#x68C0;&#x67E5;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x503C;&#x4E0D;&#x662F;&#x68C0;&#x67E5;&#x7684;&#x8DEF;&#x5F84;&#x540D;&#x7684;&#x521D;&#x59CB;&#x90E8;&#x5206;&#xFF0C;&#x5219;&#x4F1A;&#x68C0;&#x67E5;&#x6574;&#x4E2A;&#x8DEF;&#x5F84;&#x540D;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x6B64;&#x53C2;&#x6570;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x503C;&#x4E0E;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x540D;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x68C0;&#x67E5;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x3002;&#x53C2;&#x6570;&#x503C;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x53D8;&#x91CF;&#x3002;</p>
</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">disable_symlinks</span> on from<span class="token operator">=</span><span class="token variable">$document_root</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x6B64;&#x6307;&#x4EE4;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x5177;&#x6709; <code>openat()</code> &#x548C; <code>fstatat()</code> &#x63A5;&#x53E3;&#x7684;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x7CFB;&#x7EDF;&#x5305;&#x62EC;&#x73B0;&#x4EE3;&#x7248;&#x672C;&#x7684;FreeBSD&#x3001;Linux &#x548C; Solaris&#x3002;</p>
<p>&#x53C2;&#x6570; <code>on</code> &#x548C; <code>if_not_owner</code> &#x589E;&#x52A0;&#x4E86;&#x5904;&#x7406;&#x5F00;&#x9500;&#x3002;</p>
<blockquote>
<p>&#x5728;&#x4E0D;&#x652F;&#x6301;&#x6253;&#x5F00;&#x76EE;&#x5F55;&#x4EC5;&#x7528;&#x4E8E;&#x641C;&#x7D22;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF0C;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x9700;&#x8981; worker &#x8FDB;&#x7A0B;&#x5BF9;&#x6240;&#x6709;&#x6B63;&#x5728;&#x68C0;&#x67E5;&#x7684;&#x76EE;&#x5F55;&#x5177;&#x6709;&#x8BFB;&#x53D6;&#x6743;&#x9650;&#x3002;</p>
<p><a href="ngx_http_autoindex_module.html">ngx_http_autoindex_module</a>&#x3001;<a href="ngx_http_random_index_module.html">ngx_http_random_index_module</a> &#x548C; <a href="ngx_http_dav_module.html">ngx_http_dav_module</a> &#x6A21;&#x5757;&#x76EE;&#x524D;&#x5FFD;&#x7565;&#x6B64;&#x6307;&#x4EE4;&#x3002;</p>
</blockquote>
<h3 id="errorpage">error_page</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>error_page</strong> <code>code ... [=[response]] uri</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location&#x3001;location &#x4E2D;&#x7684; if</td>
</tr>
</tbody>
</table>
<p>&#x5B9A;&#x4E49;&#x9488;&#x5BF9;&#x6307;&#x5B9A;&#x9519;&#x8BEF;&#x663E;&#x793A;&#x7684; URI&#x3002;<code>uri</code> &#x503C;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">error_page</span> <span class="token number">404</span>             <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>
<span class="token keyword">error_page</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> <span class="token operator">/</span><span class="token number">50</span>x<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
</code></pre>
<p>&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x66F4;&#x6539;&#x4E3A; <code>GET</code>&#xFF0C;&#x5185;&#x90E8;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6307;&#x5B9A;&#x7684; <code>uri</code>&#xFF08;&#x9664; <code>GET</code> &#x548C; <code>HEAD</code> &#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#xFF09;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>=response</code> &#x8BED;&#x6CD5;&#x5C06;&#x4FEE;&#x6539;&#x54CD;&#x5E94;&#x4EE3;&#x7801;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">=</span><span class="token number">200</span> <span class="token operator">/</span>empty<span class="token punctuation">.</span>gif<span class="token punctuation">;</span>
</code></pre>
<p>&#x5982;&#x679C;&#x9519;&#x8BEF;&#x54CD;&#x5E94;&#x662F;&#x7531;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x6216; FastCGI/uwsgi/SCGI &#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x4E14;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x80FD;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x54CD;&#x5E94;&#x4EE3;&#x7801;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;200&#x3001;302&#x3001;401 &#x6216; 404&#xFF09;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x8FD4;&#x56DE;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x54CD;&#x5E94;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token number">404.</span>php<span class="token punctuation">;</span>
</code></pre>
<p>&#x5982;&#x679C;&#x5728;&#x5185;&#x90E8;&#x91CD;&#x5B9A;&#x5411;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x66F4;&#x6539; URI &#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x5C06;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x4F20;&#x9012;&#x7ED9;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x4E86;&#x7684; location&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">=</span> @fallback<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> @fallback <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>backend<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>&#x5982;&#x679C; <code>uri</code> &#x5904;&#x7406;&#x5BFC;&#x81F4;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x6700;&#x540E;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x5C06;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
</blockquote>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; URL &#x91CD;&#x5B9A;&#x5411;&#x8FDB;&#x884C;&#x9519;&#x8BEF;&#x5904;&#x7406;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">error_page</span> <span class="token number">403</span>      <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>forbidden<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
<span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">=</span><span class="token number">301</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>notfound<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
</code></pre>
<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C06;&#x54CD;&#x5E94;&#x4EE3;&#x7801; 302 &#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5B83;&#x53EA;&#x80FD;&#x662F;&#x91CD;&#x5B9A;&#x5411;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#xFF08;301&#x3001;302&#x3001;303&#x3001;307 &#x548C; 308&#xFF09;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.1.16 &#x548C; 1.0.13 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x4EE3;&#x7801; 307 &#x6CA1;&#x6709;&#x88AB;&#x89C6;&#x4E3A;&#x91CD;&#x5B9A;&#x5411;&#x3002;</p>
<p>&#x76F4;&#x5230; 1.13.0 &#x7248;&#x672C;&#xFF0C;&#x4EE3;&#x7801; 308 &#x624D;&#x88AB;&#x89C6;&#x4E3A;&#x91CD;&#x5B9A;&#x5411;&#x3002;</p>
</blockquote>
<p>&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x6CA1;&#x6709;&#x5728;&#x5F53;&#x524D;&#x7EA7;&#x522B;&#x4E0A;&#x5B9A;&#x4E49; error_page &#x6307;&#x4EE4;&#x65F6;&#xFF0C;&#x6307;&#x4EE4;&#x624D;&#x4ECE;&#x4E0A;&#x4E00;&#x7EA7;&#x7EE7;&#x627F;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x3002;</p>
<h3 id="etag">etag</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>etag</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">etag on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 1.3.3 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x9759;&#x6001;&#x8D44;&#x6E90; <strong>ETag</strong> &#x54CD;&#x5E94;&#x5934;&#x5B57;&#x6BB5;&#x3002;</p>
<h3 id="http">http</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>http</strong> <code>{ ... }</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">main</td>
</tr>
</tbody>
</table>
<p>&#x63D0;&#x4F9B;&#x6307;&#x5B9A; HTTP server &#x6307;&#x4EE4;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E0A;&#x4E0B;&#x6587;&#x3002;</p>
<h3 id="ifmodifiedsince">if_modified_since</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>if_modified_since</strong> <code>off</code> \</td>
<td><code>exact</code> \</td>
<td><code>before</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">if_modified_since exact;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 0.7.24 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x6307;&#x5B9A;&#x5982;&#x4F55;&#x5C06;&#x54CD;&#x5E94;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x4E0E; <strong>If-Modified-Since</strong> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x7684;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF1A;</p>
<ul>
<li><p><code>off</code></p>
<p>  &#x5FFD;&#x7565; <strong>If-Modified-Since</strong> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#xFF08;0.7.34&#xFF09;</p>
</li>
<li><p><code>exact</code></p>
<p>  &#x5B8C;&#x5168;&#x5339;&#x914D;</p>
</li>
<li><p><code>before</code></p>
<p>  &#x54CD;&#x5E94;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#x5C0F;&#x4E8E;&#x6216;&#x7B49;&#x4E8E; <strong>If-Modified-Since</strong> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x7684;&#x65F6;&#x95F4;</p>
</li>
</ul>
<h3 id="ignoreinvalidheaders">ignore_invalid_headers</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>ignore_invalid_headers</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">ignore_invalid_headers on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x63A7;&#x5236;&#x662F;&#x5426;&#x5E94;&#x5FFD;&#x7565;&#x5177;&#x6709;&#x65E0;&#x6548;&#x540D;&#x79F0;&#x7684;&#x5934;&#x5B57;&#x6BB5;&#x3002;&#x6709;&#x6548;&#x540D;&#x79F0;&#x7531;&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x3001;&#x6570;&#x5B57;&#x3001;&#x8FDE;&#x5B57;&#x7B26;&#x6216;&#x4E0B;&#x5212;&#x7EBF;&#x7EC4;&#x6210;&#xFF08;&#x7531; <a href="#underscores_in_headers">underscores_in_headers</a> &#x6307;&#x4EE4;&#x63A7;&#x5236;&#xFF09;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728; <a href="#server">server</a> &#x7EA7;&#x522B;&#x6307;&#x5B9A;&#x4E86;&#x8BE5;&#x6307;&#x4EE4;&#xFF0C;&#x5219;&#x5176;&#x503C;&#x4EC5;&#x5728; server &#x4E3A;&#x9ED8;&#x8BA4; server &#x65F6;&#x4F7F;&#x7528;&#x3002;&#x6307;&#x5B9A;&#x7684;&#x503C;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x76D1;&#x542C;&#x76F8;&#x540C;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x7684;&#x6240;&#x6709;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<h3 id="internal">internal</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>internal</strong>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">location</td>
</tr>
</tbody>
</table>
<p>&#x6307;&#x5B9A;&#x7ED9;&#x5B9A;&#x7684; location &#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5185;&#x90E8;&#x8BF7;&#x6C42;&#x3002;&#x5BF9;&#x4E8E;&#x5916;&#x90E8;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD4;&#x56DE;&#x5BA2;&#x6237;&#x7AEF;&#x9519;&#x8BEF; 404&#xFF08;&#x672A;&#x627E;&#x5230;&#xFF09;&#x3002;&#x5185;&#x90E8;&#x8BF7;&#x6C42;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x8BF7;&#x6C42;&#x7531; <a href="#error_page">error_page</a>&#x3001;<a href="#index">index</a>&#x3001;<a href="#random_index">random_index</a> &#x548C; <a href="#try_files">try_files</a> &#x6307;&#x4EE4;&#x91CD;&#x5B9A;&#x5411;</li>
<li>&#x6765; upstream server &#x7684; <strong>X-Accel-Redirect</strong> &#x54CD;&#x5E94;&#x5934;&#x5B57;&#x6BB5;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x8BF7;&#x6C42;</li>
<li>&#x7531; <a href="ngx_http_ssi_module.html">ngx_http_ssi_module</a> &#x6A21;&#x5757;&#x7684; <code>include virtual</code> &#x547D;&#x4EE4;&#x3001;<a href="ngx_http_addition_module.html">ngx_http_addition_module</a> &#x6A21;&#x5757;&#x6307;&#x4EE4;&#x548C; <a href="ngx_http_auth_request_module.html#auth_request">auth_request</a> &#x548C; <a href="ngx_http_mirror_module.html#mirror">mirror</a> &#x6307;&#x4EE4;&#x7EC4;&#x6210;&#x7684;&#x5B50;&#x8BF7;&#x6C42;</li>
<li>&#x7531; <a href="ngx_http_rewrite_module.html#rewrite">rewrite</a> &#x6307;&#x4EE4;&#x66F4;&#x6539;&#x7684;&#x8BF7;&#x6C42;</li>
</ul>
<p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">/</span><span class="token number">404.</span>html<span class="token punctuation">;</span>

<span class="token keyword">location</span> <span class="token operator">/</span><span class="token number">404.</span>html <span class="token punctuation">{</span>
    <span class="token keyword">internal</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x9650;&#x5236; 10 &#x4E2A;&#x5185;&#x90E8;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x4E0D;&#x6B63;&#x786E;&#x914D;&#x7F6E;&#x5F15;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x6B7B;&#x5FAA;&#x73AF;&#x3002;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x6B64;&#x9650;&#x5236;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x9519;&#x8BEF; 500&#xFF08;&#x5185;&#x90E8;&#x670D;&#x52A1;&#x5668;&#x9519;&#x8BEF;&#xFF09;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x4E2D;&#x770B;&#x5230; <code>rewrite or internal redirection cycle</code> &#x6D88;&#x606F;&#x3002;</p>
</blockquote>
<h3 id="keepalivedisable">keepalive_disable</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>keepalive_disable</strong> <code>none</code> \</td>
<td><code>browser ...</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">keepalive_disable msie6;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x7981;&#x7528;&#x4E0E;&#x884C;&#x4E3A;&#x5F02;&#x5E38;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;<code>browser</code> &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x54EA;&#x4E9B;&#x6D4F;&#x89C8;&#x5668;&#x5C06;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x3002;&#x4E00;&#x65E6;&#x63A5;&#x6536;&#x5230; POST &#x8BF7;&#x6C42;&#xFF0C;&#x503C; <code>msie6</code> &#x5C06;&#x7981;&#x7528;&#x4E0E;&#x65E7;&#x7248;&#x672C; MSIE &#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;&#x503C; <code>safari</code> &#x7981;&#x7528;&#x4E0E; macOS &#x548C;&#x7C7B;&#x4F3C; MacOS &#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684; Safari &#x548C; Safari &#x6D4F;&#x89C8;&#x5668;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;&#x503C; <code>none</code> &#x542F;&#x7528;&#x4E0E;&#x6240;&#x6709;&#x6D4F;&#x89C8;&#x5668;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.1.18 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x503C; <code>safari</code> &#x5339;&#x914D;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x7684;&#x6240;&#x6709; Safari &#x548C;&#x7C7B; Safari &#x6D4F;&#x89C8;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7981;&#x7528;&#x4E0E;&#x5B83;&#x4EEC;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;</p>
</blockquote>
<h3 id="keepaliverequests">keepalive_requests</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>keepalive_requests</strong> <code>number</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">keepalive_requests 100;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 0.8.0 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x4FDD;&#x6301;&#x6D3B;&#x52A8;&#xFF08;keep-alive&#xFF09;&#x8FDE;&#x63A5;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x7684;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#x3002;&#x5728;&#x53D1;&#x51FA;&#x7684;&#x8BF7;&#x6C42;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x6570;&#x91CF;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#x3002;</p>
<h3 id="keepalivetimeout">keepalive_timeout</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>keepalive_timeout</strong> <code>timeout</code> <code>[header_timeout]</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">keepalive_timeout 75s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;keep-alive &#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5C06;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x4FDD;&#x6301;&#x6253;&#x5F00;&#x72B6;&#x6001;&#x3002;&#x96F6;&#x503C;&#x5C06;&#x7981;&#x7528;  keep-alive &#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;&#x53EF;&#x9009;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5728; <strong>Keep-Alive: timeout=<code>time</code></strong> &#x54CD;&#x5E94;&#x5934;&#x57DF;&#x4E2D;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x503C;&#x3002;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#x3002;</p>
<p>Mozilla &#x548C; Konqueror &#x4F1A;&#x8BC6;&#x522B; **Keep-Alive: timeout=<code>time</code> &#x5934;&#x5B57;&#x6BB5;&#x3002;MSIE &#x5728;&#x5927;&#x7EA6;&#x5728; 60 &#x79D2;&#x949F;&#x5185;&#x81EA;&#x884C;&#x5173;&#x95ED; keep-alive &#x8FDE;&#x63A5;&#x3002;</p>
<h3 id="largeclientheaderbuffers">large_client_header_buffers</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>large_client_header_buffers</strong> <code>number size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">arge_client_header_buffers 4 8k;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x7528;&#x4E8E;&#x8BFB;&#x53D6;&#x5927;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5934;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x6700;&#x5927; <code>number</code>&#xFF08;&#x6570;&#x91CF;&#xFF09;&#x548C; <code>size</code>&#xFF08;&#x5927;&#x5C0F;&#xFF09;&#x3002;&#x8BF7;&#x6C42;&#x884C;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x8FD4;&#x56DE; 414&#xFF08;&#x8BF7;&#x6C42; URI &#x592A;&#x957F;&#xFF09;&#x9519;&#x8BEF;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x4E5F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x8FD4;&#x56DE; 400&#xFF08;&#x9519;&#x8BEF;&#x8BF7;&#x6C42;&#xFF09;&#x9519;&#x8BEF;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x7F13;&#x51B2;&#x533A;&#x53EA;&#x80FD;&#x6309;&#x9700;&#x5206;&#x914D;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x7B49;&#x4E8E; 8K &#x5B57;&#x8282;&#x3002;&#x5982;&#x679C;&#x5728;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x88AB;&#x8F6C;&#x6362;&#x4E3A; keep-alive &#x72B6;&#x6001;&#xFF0C;&#x8FD9;&#x4E9B;&#x7F13;&#x51B2;&#x533A;&#x5C06;&#x88AB;&#x91CA;&#x653E;&#x3002;</p>
<h3 id="limitexcept">limit_except</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>limit_except</strong> <code>method ... { ... }</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">location</td>
</tr>
</tbody>
</table>
<p>&#x9650;&#x5236;&#x7ED9;&#x5B9A;&#x7684; location &#x5185;&#x5141;&#x8BB8;&#x7684; HTTP &#x65B9;&#x6CD5;&#x3002;<code>method</code> &#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EE5;&#x4E0B;&#x4E4B;&#x4E00;&#xFF1A;<code>GET</code>&#x3001;<code>HEAD</code>&#x3001;<code>POST</code>&#x3001;<code>PUT</code>&#x3001;<code>DELETE</code>&#x3001;<code>MKCOL</code>&#x3001;<code>COPY</code>&#x3001;<code>MOVE</code>&#x3001;<code>OPTIONS</code>&#x3001;<code>PROPFIND</code>&#x3001;<code>PROPPATCH</code>&#x3001;<code>LOCK</code>&#x3001;<code>UNLOCK</code> &#x6216; <code>PATCH</code>&#x3002;&#x5141;&#x8BB8; <code>GET</code> &#x65B9;&#x6CD5;&#x4E5F;&#x5C06;&#x4F7F;&#x5F97; <code>HEAD</code>&#x65B9;&#x6CD5;&#x88AB;&#x5141;&#x8BB8;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="ngx_http_access_module.html">ngx_http_access_module</a> &#x548C; <a href="ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a> &#x6A21;&#x5757;&#x6307;&#x4EE4;&#x6765;&#x9650;&#x5236;&#x5BF9;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x7684;&#x8BBF;&#x95EE;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">limit_except</span> GET <span class="token punctuation">{</span>
    <span class="token keyword">allow</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">32</span><span class="token punctuation">;</span>
    <span class="token keyword">deny</span>  all<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x5C06;&#x9650;&#x5236;&#x8BBF;&#x95EE;&#x9664; <code>GET</code> &#x548C; <code>HEAD</code> &#x4E4B;&#x5916;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x3002;</p>
<h3 id="limitrate">limit_rate</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>limit_rate</strong> <code>rate</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">limit_rate 0;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location&#x3001;location &#x4E2D;&#x7684; if</td>
</tr>
</tbody>
</table>
<p>&#x9650;&#x5236;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x54CD;&#x5E94;&#x4F20;&#x8F93;&#x901F;&#x7387;&#x3002;<code>rate</code> &#x4EE5;&#x5B57;&#x8282;/&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#x3002;&#x96F6;&#x503C;&#x5C06;&#x7981;&#x7528;&#x901F;&#x7387;&#x9650;&#x5236;&#x3002;&#x9650;&#x5236;&#x8BBE;&#x7F6E;&#x662F;&#x9488;&#x5BF9;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x540C;&#x65F6;&#x6253;&#x5F00;&#x4E24;&#x4E2A;&#x8FDE;&#x63A5;&#xFF0C;&#x5219;&#x6574;&#x4F53;&#x901F;&#x7387;&#x5C06;&#x662F;&#x6307;&#x5B9A;&#x9650;&#x5236;&#x7684;&#x4E24;&#x500D;&#x3002;</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728; <code>$limit_rate</code> &#x53D8;&#x91CF;&#x4E2D;&#x8BBE;&#x7F6E;&#x901F;&#x7387;&#x9650;&#x5236;&#x3002;&#x6839;&#x636E;&#x67D0;&#x4E9B;&#x6761;&#x4EF6;&#x6765;&#x9650;&#x5236;&#x901F;&#x7387;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x7528;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$slow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">set</span> <span class="token variable">$limit_rate</span> <span class="token number">4</span>k<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x7684; <strong>X-Accel-Limit-Rate</strong> &#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x8BBE;&#x7F6E;&#x901F;&#x7387;&#x9650;&#x5236;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="ngx_http_proxy_module.html#proxy_ignore_headers">proxy_ignore_headers</a>&#x3001;<a href="ngx_http_fastcgi_module.html#fastcgi_ignore_headers">fastcgi_ignore_headers</a>&#x3001;<a href="ngx_http_uwsgi_module.html#uwsgi_ignore_headers">uwsgi_ignore_headers</a> &#x548C; <a href="ngx_http_scgi_module.html#scgi_ignore_headers">scgi_ignore_headers</a> &#x6307;&#x4EE4;&#x7981;&#x7528;&#x6B64;&#x529F;&#x80FD;&#x3002;</p>
<h3 id="lingeringtime">lingering_time</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>lingering_time</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">lingering_time 30s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5F53; <a href="ngx_http_core_module.html#lingering_close">lingering_close</a> &#x751F;&#x6548;&#x65F6;&#xFF0C;&#x8BE5;&#x6307;&#x4EE4;&#x6307;&#x5B9A; nginx &#x5904;&#x7406;&#xFF08;&#x8BFB;&#x53D6;&#x548C;&#x5FFD;&#x7565;&#xFF09;&#x6765;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x989D;&#x5916;&#x6570;&#x636E;&#x7684;&#x6700;&#x957F;&#x65F6;&#x95F4;&#x3002;&#x4E4B;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x5373;&#x4F7F;&#x8FD8;&#x6709;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h3 id="lingeringtimeout">lingering_timeout</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>lingering_timeout</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">lingering_timeout 5s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5F53; <a href="ngx_http_core_module.html#lingering_close">lingering_close</a> &#x751F;&#x6548;&#x65F6;&#xFF0C;&#x8BE5;&#x6307;&#x4EE4;&#x6307;&#x5B9A;&#x66F4;&#x591A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x636E;&#x5230;&#x8FBE;&#x7684;&#x6700;&#x957F;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x5728;&#x6B64;&#x671F;&#x95F4;&#x672A;&#x6536;&#x5230;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x8BFB;&#x53D6;&#x548C;&#x5FFD;&#x7565;&#x6570;&#x636E;&#xFF0C;nginx &#x518D;&#x6B21;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;<strong>wait-read-ignore</strong> &#x5FAA;&#x73AF;&#x88AB;&#x91CD;&#x590D;&#xFF0C;&#x4F46;&#x4E0D;&#x518D;&#x7531; <a href="#lingering_time">lingering_time</a> &#x6307;&#x4EE4;&#x6307;&#x5B9A;&#x3002;</p>
<h3 id="listen">listen</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>listen</strong> `address[:port] [default_server] [ssl] [http2 \</td>
<td>spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on\</td>
<td>off] [reuseport] [so_keepalive=on\</td>
<td>off\</td>
<td>[keepidle]:[keepintvl]:[keepcnt]]<code>; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span> **listen**</code>port [default_server] [ssl] [http2 \</td>
<td>spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on\</td>
<td>off] [reuseport] [so_keepalive=on\</td>
<td>off\</td>
<td>[keepidle]:[keepintvl]:[keepcnt]]<code>; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span> **listen**</code>unix:path [default_server] [ssl] [http2 \</td>
<td>spdy] [proxy_protocol] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [so_keepalive=on\</td>
<td>off\</td>
<td>[keepidle]:[keepintvl]:[keepcnt]]`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">listen *:80 \</td>
<td>*:8000;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">server</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E; IP &#x7684; <code>address</code> &#xFF08;&#x5730;&#x5740;&#xFF09;&#x548C; <code>port</code> &#xFF08;&#x7AEF;&#x53E3;&#xFF09;&#xFF0C;&#x6216;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x7684; UNIX &#x57DF;&#x5957;&#x63A5;&#x5B57;&#x7684; <code>path</code> &#xFF08;&#x8DEF;&#x5F84;&#xFF09;&#x3002;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6307;&#x5B9A; <code>addres</code> &#xFF08;&#x5730;&#x5740;&#xFF09;&#x548C; <code>port</code> &#xFF08;&#x7AEF;&#x53E3;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53EA;&#x6307;&#x5B9A; <code>address</code> &#xFF08;&#x5730;&#x5740;&#xFF09;&#x6216; <code>port</code> &#xFF08;&#x7AEF;&#x53E3;&#xFF09;&#x3002;<code>address</code> &#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">listen</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
<span class="token keyword">listen</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token punctuation">;</span>
<span class="token keyword">listen</span> <span class="token number">8000</span><span class="token punctuation">;</span>
<span class="token keyword">listen</span> <span class="token operator">*</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
<span class="token keyword">listen</span> localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
</code></pre>
<p>IPv6 &#x5730;&#x5740;&#xFF08;0.7.36&#xFF09;&#x5728;&#x65B9;&#x62EC;&#x53F7;&#x4E2D;&#x6307;&#x5B9A;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">listen</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
<span class="token keyword">listen</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>UNIX &#x57DF;&#x5957;&#x63A5;&#x5B57;&#xFF08;0.8.21&#xFF09;&#x7528; <code>unix:</code> &#x524D;&#x7F00;&#x6307;&#x5B9A;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">listen</span> unix<span class="token punctuation">:</span><span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span>sock<span class="token punctuation">;</span>
</code></pre>
<p>&#x5982;&#x679C;&#x53EA;&#x6307;&#x5B9A; <code>address</code>&#xFF0C;&#x5219;&#x4F7F;&#x7528; 80 &#x7AEF;&#x53E3;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6307;&#x4EE4;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C; nginx &#x662F;&#x4EE5;&#x8D85;&#x7EA7;&#x7528;&#x6237;&#x6743;&#x9650;&#x8FD0;&#x884C;&#xFF0C;&#x5219;&#x4F7F;&#x7528; <code>*:80</code>&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528; <code>*:8000</code>&#x3002;</p>
<p><code>default_server</code> &#x53C2;&#x6570;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x5C06;&#x4F7F;&#x5F97;&#x670D;&#x52A1;&#x5668;&#x6210;&#x4E3A;&#x6307;&#x5B9A; <code>address:port</code> &#x5BF9;&#x7684;&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x5668;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x4EE4;&#x6709; <code>default_server</code> &#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5177;&#x6709; <code>address:port</code> &#x5BF9;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5C06;&#x662F;&#x8BE5;&#x5BF9;&#x7684;&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<blockquote>
<p>&#x5728; 0.8.21 &#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x6B64;&#x53C2;&#x6570;&#x7B80;&#x5355;&#x5730;&#x547D;&#x540D;&#x4E3A; <code>default</code>&#x3002;</p>
</blockquote>
<p><code>ssl</code> &#x53C2;&#x6570;&#xFF08;0.7.14&#xFF09;&#x5141;&#x8BB8;&#x6307;&#x5B9A;&#x8BE5;&#x7AEF;&#x53E3;&#x4E0A;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x90FD;&#x5E94;&#x8BE5;&#x5DE5;&#x4F5C;&#x5728; SSL &#x6A21;&#x5F0F;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4E3A;&#x5904;&#x7406; HTTP &#x548C; HTTPS &#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x66F4;&#x7D27;&#x51D1;&#x7684;<a href="&#x4ECB;&#x7ECD;/&#x914D;&#x7F6E;HTTPS&#x670D;&#x52A1;&#x5668;.md#single_http_https_server">&#x914D;&#x7F6E;</a>&#x3002;</p>
<p><code>http2</code> &#x53C2;&#x6570;&#xFF08;1.9.5&#xFF09;&#x914D;&#x7F6E;&#x7AEF;&#x53E3;&#x63A5;&#x53D7; <a href="ngx_http_v2_module.html">HTTP/2</a> &#x8FDE;&#x63A5;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD8;&#x5E94;&#x8BE5;&#x6307;&#x5B9A; <code>ssl</code> &#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06; nginx &#x914D;&#x7F6E;&#x4E3A;&#x63A5;&#x53D7;&#x6CA1;&#x6709; SSL &#x7684; HTTP/2 &#x8FDE;&#x63A5;&#x3002;</p>
<p><code>spdy</code> &#x53C2;&#x6570;&#xFF08;1.3.15 &#x2014; 1.9.4&#xFF09;&#x5141;&#x8BB8;&#x5728;&#x6B64;&#x7AEF;&#x53E3;&#x4E0A;&#x63A5;&#x53D7; <a href="ngx_http_spdy_module.html">SPDY</a> &#x8FDE;&#x63A5;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD8;&#x5E94;&#x8BE5;&#x6307;&#x5B9A; <code>ssl</code> &#x53C2;&#x6570;&#xFF0C;&#x4F46;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06; nginx &#x914D;&#x7F6E;&#x4E3A;&#x63A5;&#x53D7;&#x6CA1;&#x6709; SSL &#x7684; SPDY &#x8FDE;&#x63A5;&#x3002;</p>
<p><code>proxy_protocol</code> &#x53C2;&#x6570;&#xFF08;1.5.12&#xFF09;&#x5141;&#x8BB8;&#x6307;&#x5B9A;&#x6B64;&#x7AEF;&#x53E3;&#x4E0A;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x90FD;&#x5E94;&#x4F7F;&#x7528; <a href="http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt" target="_blank">PROXY &#x534F;&#x8BAE;</a>&#x3002;</p>
<p><code>listen</code> &#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x6709;&#x7279;&#x5B9A;&#x4E8E;&#x5957;&#x63A5;&#x5B57;&#x76F8;&#x5173;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x7684;&#x51E0;&#x4E2A;&#x9644;&#x52A0;&#x53C2;&#x6570;&#x3002;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55; <code>listen</code> &#x6307;&#x4EE4;&#x4E2D;&#x6307;&#x5B9A;&#xFF0C;&#x4F46;&#x5BF9;&#x4E8E;&#x7ED9;&#x5B9A;&#x7684; <code>address:port</code> &#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#x3002;</p>
<blockquote>
<p>&#x5728; 0.8.21 &#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EA;&#x80FD;&#x5728; <code>listen</code> &#x6307;&#x4EE4;&#x4E2D;&#x4E0E;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x4E00;&#x8D77;&#x6307;&#x5B9A;&#x3002;</p>
</blockquote>
<ul>
<li><p><code>setfib=number</code></p>
<p>  &#x6B64;&#x53C2;&#x6570;&#xFF08;0.8.44&#xFF09;&#x8BBE;&#x7F6E;&#x76F8;&#x5173;&#x8054;&#x7684;&#x8DEF;&#x7531;&#x8868;&#xFF0C;&#x76D1;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x7684; FIB&#xFF08;<code>SO_SETFIB</code> &#x9009;&#x9879;&#xFF09;&#x3002;&#x76EE;&#x524D;&#x53EA;&#x9002;&#x7528;&#x4E8E; FreeBSD&#x3002;</p>
</li>
<li><p><code>fastopen=number</code></p>
<p>  &#x4E3A;&#x4FA6;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x542F;&#x7528; <strong><a href="http://en.wikipedia.org/wiki/TCP_Fast_Open" target="_blank">TCP Fast Open</a></strong> &#xFF08;1.5.8&#xFF09;&#xFF0C;&#x5E76;&#x9650;&#x5236;&#x5C1A;&#x672A;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x8FDE;&#x63A5;&#x961F;&#x5217;&#x7684;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x3002;</p>
<blockquote>
<p>&#x4E0D;&#x8981;&#x542F;&#x7528;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x9664;&#x975E;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x5904;&#x7406;&#x63A5;&#x6536;&#x591A;&#x4E2A;<a href="https://tools.ietf.org/html/rfc7413#section-6.1" target="_blank">&#x76F8;&#x540C;&#x7684; SYN &#x5305;&#x7684;&#x6570;&#x636E;</a>&#x3002;</p>
</blockquote>
</li>
<li><p><code>backlog=number</code></p>
<p>  &#x5728; <code>listen()</code> &#x8C03;&#x7528;&#x4E2D;&#x8BBE;&#x7F6E;&#x9650;&#x5236;&#x6302;&#x8D77;&#x8FDE;&#x63A5;&#x961F;&#x5217;&#x7684;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x7684;<code>backlog</code> &#x53C2;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;FreeBSD&#x3001;DragonFly BSD &#x548C; macOS &#x4E0A;&#x7684; <code>backlog</code> &#x8BBE;&#x7F6E;&#x4E3A; -1&#xFF0C;&#x5728;&#x5176;&#x4ED6;&#x5E73;&#x53F0;&#x4E0A;&#x8BBE;&#x7F6E;&#x4E3A; 511&#x3002;</p>
</li>
<li><p><code>rcvbuf=size</code></p>
<p>  &#x8BBE;&#x7F6E;&#x4FA6;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x7684;&#x63A5;&#x6536;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF08;<code>SO_RCVBUF</code> &#x9009;&#x9879;&#xFF09;&#x3002;</p>
</li>
<li><p><code>sndbuf=size</code></p>
<p>  &#x8BBE;&#x7F6E;&#x4FA6;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x7684;&#x53D1;&#x9001;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF08;<code>SO_SNDBUF</code> &#x9009;&#x9879;&#xFF09;&#x3002;</p>
</li>
<li><p><code>accept_filter=filter</code></p>
<p>  &#x4E3A;&#x4FA6;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x8BBE;&#x7F6E;&#x63A5;&#x53D7;&#x8FC7;&#x6EE4;&#x5668;&#xFF08;<code>SO_ACCEPTFILTER</code> &#x9009;&#x9879;&#xFF09;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x8BE5;&#x5957;&#x63A5;&#x5B57;&#x5C06;&#x4F20;&#x5165;&#x7684;&#x8FDE;&#x63A5;&#x5728;&#x4F20;&#x9012;&#x7ED9; <code>accept()</code> &#x4E4B;&#x524D;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x3002;&#x8FD9;&#x53EA;&#x9002;&#x7528;&#x4E8E; FreeBSD &#x548C; NetBSD 5.0+&#x3002;&#x53EF;&#x8BBE;&#x7F6E;&#x503C;<a href="http://man.freebsd.org/accf_data" target="_blank">dataready</a> &#x6216; <a href="http://man.freebsd.org/accf_http" target="_blank">httpready</a>&#x3002;</p>
</li>
<li><p><code>deferred</code></p>
<p>  &#x6307;&#x793A;&#x5728; Linux &#x4E0A;&#x4F7F;&#x7528;&#x5EF6;&#x8FDF; <code>accept()</code>&#xFF08;<code>TCP_DEFER_ACCEPT</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#xFF09;&#x3002;</p>
</li>
<li><p><code>bind</code></p>
<p>  &#x6307;&#x793A;&#x4E3A;&#x7ED9;&#x5B9A;&#x7684; <code>address:port</code> &#x5BF9;&#x5355;&#x72EC;&#x8FDB;&#x884C; <code>bind()</code> &#x8C03;&#x7528;&#x3002;&#x8FD9;&#x662F;&#x6709;&#x7528;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x6709;&#x76F8;&#x540C;&#x7AEF;&#x53E3;&#x4F46;&#x4E0D;&#x540C;&#x5730;&#x5740;&#x7684; <code>listen</code> &#x6307;&#x4EE4;&#xFF0C;&#x5E76;&#x4E14;&#x5176;&#x4E2D;&#x4E00;&#x4E2A; <code>listen</code> &#x6307;&#x4EE4;&#x76D1;&#x542C;&#x7ED9;&#x5B9A;&#x7AEF;&#x53E3;&#xFF08;<code>*:port</code>&#xFF09;&#x7684;&#x6240;&#x6709;&#x5730;&#x5740;&#xFF0C;&#x5219; nginx &#x5C06; <code>bind()</code> &#x5E94;&#x7528;&#x5230;<code>*:port</code>&#x3002;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x4F1A;&#x8FDB;&#x884C; <code>getsockname()</code> &#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x4EE5;&#x786E;&#x5B9A;&#x63A5;&#x53D7;&#x8BE5;&#x8FDE;&#x63A5;&#x7684;&#x5730;&#x5740;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528; <code>setfib</code>&#x3001;<code>backlog</code>&#x3001;<code>rcvbuf</code>&#x3001;<code>sndbuf</code>&#x3001;<code>accept_filter</code>&#x3001;<code>deferred</code>&#x3001;<code>ipv6only</code> &#x6216; <code>so_keepalive</code> &#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x7ED9;&#x5B9A;&#x7684; <code>address:port</code> &#x5BF9;&#x5C06;&#x59CB;&#x7EC8;&#x8FDB;&#x884C;&#x5355;&#x72EC;&#x7684; <code>bind()</code> &#x8C03;&#x7528;&#x3002;</p>
</li>
<li><p><code>ipv6only=ON|OFF</code></p>
<p>  &#x6B64;&#x53C2;&#x6570;&#xFF08;0.7.42&#xFF09;&#x786E;&#x5B9A;&#xFF08;&#x901A;&#x8FC7; <code>IPV6_V6ONLY</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#xFF09;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x901A;&#x914D;&#x7B26;&#x5730;&#x5740; <code>[::]</code> &#x7684; IPv6 &#x5957;&#x63A5;&#x5B57;&#x662F;&#x5426;&#x4EC5;&#x63A5;&#x53D7; IPv6 &#x8FDE;&#x63A5;&#x6216; IPv6 &#x548C; IPv4 &#x8FDE;&#x63A5;&#x3002;&#x6B64;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x4E3A;&#x5F00;&#x542F;&#x3002;&#x5B83;&#x53EA;&#x80FD;&#x5728;&#x542F;&#x52A8;&#x65F6;&#x8BBE;&#x7F6E;&#x4E00;&#x6B21;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.3.4 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x7701;&#x7565;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x8BBE;&#x7F6E;&#x5C06;&#x5BF9;&#x4E8E;&#x5957;&#x63A5;&#x5B57;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;</p>
</blockquote>
</li>
<li><p><code>reuseport</code></p>
<p>  &#x6B64;&#x53C2;&#x6570;&#xFF08;1.9.1&#xFF09;&#x6307;&#x793A;&#x4E3A;&#x6BCF;&#x4E2A;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x76D1;&#x542C;&#x5957;&#x63A5;&#x5B57;&#xFF08;&#x4F7F;&#x7528; <code>SO_REUSEPORT</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#xFF09;&#xFF0C;&#x5141;&#x8BB8;&#x5185;&#x6838;&#x5728;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x4E4B;&#x95F4;&#x5206;&#x914D;&#x4F20;&#x5165;&#x7684;&#x8FDE;&#x63A5;&#x3002;&#x76EE;&#x524D;&#x53EA;&#x9002;&#x7528;&#x4E8E; Linux 3.9+ &#x548C; DragonFly BSD&#x3002;</p>
<blockquote>
<p>&#x4E0D;&#x5F53;&#x5730;&#x4F7F;&#x7528;&#x6B64;&#x9009;&#x9879;&#x53EF;&#x80FD;&#x4F1A;&#x5E26;&#x6765;&#x5B89;&#x5168;<a href="http://man7.org/linux/man-pages/man7/socket.7.html" target="_blank">&#x9690;&#x60A3;</a>&#x3002;</p>
</blockquote>
</li>
<li><p><code>SO_KEEPALIVE=ON|OFF|[keepidle]:[keepintvl]:[keepcnt]</code></p>
<p>  &#x6B64;&#x53C2;&#x6570;&#xFF08;1.1.11&#xFF09;&#x914D;&#x7F6E;&#x76D1;&#x542C;&#x5957;&#x63A5;&#x5B57;&#x7684; <strong>TCP keepalive</strong> &#x884C;&#x4E3A;&#x3002;&#x5982;&#x679C;&#x7701;&#x7565;&#x6B64;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x8BBE;&#x7F6E;&#x5C06;&#x5BF9;&#x5957;&#x63A5;&#x5B57;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; <code>on</code>&#xFF0C;&#x5219;&#x5957;&#x63A5;&#x5B57;&#x5C06;&#x6253;&#x5F00; <code>SO_KEEPALIVE</code> &#x9009;&#x9879;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; <code>off</code>&#xFF0C;&#x5219; <code>SO_KEEPALIVE</code> &#x9009;&#x9879;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#x3002;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x5728;&#x6BCF;&#x4E2A;&#x5957;&#x63A5;&#x5B57;&#x4E0A;&#x4F7F;&#x7528; <code>TCP_KEEPIDLE</code>&#x3001;<code>TCP_KEEPINTVL</code> &#x548C; <code>TCP_KEEPCNT</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x6765;&#x8BBE;&#x7F6E; TCP keepalive &#x53C2;&#x6570;&#x3002;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF08;&#x76EE;&#x524D;&#x4E3A; Linux 2.4+&#x3001;NetBSD 5+ &#x548C; FreeBSD 9.0-STABLE&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>keepidle</code>&#x3001;<code>keepintvl</code>&#x548C; <code>keepcnt</code> &#x53C2;&#x6570;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x4E00;&#x4E2A;&#x6216;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x76F8;&#x5E94;&#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x7684;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x5C06;&#x751F;&#x6548;&#x3002;&#x4F8B;&#x5982;&#xFF0C;</p>
<pre class="language-"><code class="lang-nginx">  <span class="token keyword">SO_KEEPALIVE</span><span class="token operator">=</span><span class="token number">30</span>m<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span>
</code></pre>
<p>  &#x5C06;&#x7A7A;&#x95F2;&#x8D85;&#x65F6;&#xFF08;<code>TCP_KEEPIDLE</code>&#xFF09;&#x8BBE;&#x7F6E;&#x4E3A; 30 &#x5206;&#x949F;&#xFF0C;&#x5C06;&#x63A2;&#x6D4B;&#x95F4;&#x9694;&#xFF08;<code>TCP_KEEPINTVL</code>&#xFF09;&#x8BBE;&#x7F6E;&#x4E3A;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x5E76;&#x5C06;&#x63A2;&#x6D4B;&#x6570;&#x91CF;&#xFF08;<code>TCP_KEEPCNT</code>&#xFF09;&#x8BBE;&#x7F6E;&#x4E3A; 10 &#x4E2A;&#x63A2;&#x6D4B;&#x3002;</p>
</li>
</ul>
<p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">listen</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> default_server accept_filter<span class="token operator">=</span>dataready backlog<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="location">location</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>location</strong> `[ = \</td>
<td>~ \</td>
<td>~* \</td>
<td>^~ ] uri { ... }<code>; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span> **location**</code>@name { ... }`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x6839;&#x636E;&#x8BF7;&#x6C42; URI &#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x5728;&#x89E3;&#x7801;&#x4EE5; <code>&#xFF05;XX</code> &#x5F62;&#x5F0F;&#x7F16;&#x7801;&#x7684;&#x6587;&#x672C;&#xFF0C;&#x89E3;&#x6790;&#x5BF9;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x7EC4;&#x4EF6; <code>.</code> &#x548C;<code>..</code> &#x7684;&#x5F15;&#x7528;&#x5E76;&#x4E14;&#x5C06;&#x4E24;&#x4E2A;&#x6216;&#x66F4;&#x591A;&#x4E2A;&#x76F8;&#x90BB;&#x659C;&#x7EBF;<a href="#merge_slashes">&#x538B;&#x7F29;</a>&#x6210;&#x5355;&#x659C;&#x7EBF;&#x4E4B;&#x540E;&#xFF0C;&#x5BF9;&#x89C4;&#x8303;&#x5316;&#x7684; URI &#x6267;&#x884C;&#x5339;&#x914D;&#x3002;</p>
<p>location &#x53EF;&#x4EE5;&#x7531;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x5B9A;&#x4E49;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7531;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5B9A;&#x4E49;&#x3002;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x524D;&#x9762;&#x4F7F;&#x7528;<code>~*</code>&#x4FEE;&#x6B63;&#x7B26;&#xFF08;&#x7528;&#x4E8E;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x5339;&#x914D;&#xFF09;&#x6216; <code>~</code> &#x4FEE;&#x6B63;&#x7B26;&#xFF08;&#x7528;&#x4E8E;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x5339;&#x914D;&#xFF09;&#x6307;&#x5B9A;&#x3002;&#x8981;&#x67E5;&#x627E;&#x5339;&#x914D;&#x7ED9;&#x5B9A;&#x8BF7;&#x6C42;&#x7684; location&#xFF0C;nginx &#x9996;&#x5148;&#x68C0;&#x67E5;&#x4F7F;&#x7528;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x524D;&#x7F00; location&#xFF09;&#x5B9A;&#x4E49;&#x7684; location&#x3002;&#x671F;&#x95F4;&#xFF0C;&#x524D;&#x7F00;&#x6700;&#x957F;&#x7684; location &#x88AB;&#x5339;&#x914D;&#x9009;&#x4E2D;&#x5E76;&#x8BB0;&#x4F4F;&#x3002;&#x7136;&#x540E;&#x6309;&#x7167;&#x5B83;&#x4EEC;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x987A;&#x5E8F;&#x68C0;&#x67E5;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x641C;&#x7D22;&#x5C06;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x5339;&#x914D;&#x65F6;&#x7EC8;&#x6B62;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x5148;&#x524D;&#x8BB0;&#x4F4F;&#x7684;&#x524D;&#x7F00; location &#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<p>location &#x5757;&#x53EF;&#x4EE5;&#x5D4C;&#x5957;&#xFF0C;&#x9664;&#x4E86;&#x4E0B;&#x9762;&#x63D0;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x4F8B;&#x5916;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x5982; macOS &#x548C; Cygwin&#xFF0C;&#x4E0E;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x5339;&#x914D;&#x5FFD;&#x7565;&#x5927;&#x5C0F;&#x5199;&#xFF08;0.7.7&#xFF09;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6BD4;&#x8F83;&#x4EC5;&#x9650;&#x4E8E;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x533A;&#x57DF;&#x8BBE;&#x7F6E;&#x3002;</p>
<p>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6355;&#x83B7;&#xFF08;0.7.40&#xFF09;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4ED6;&#x6307;&#x4EE4;&#x4E2D;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6700;&#x957F;&#x5339;&#x914D;&#x7684;&#x524D;&#x7F00; location &#x5177;&#x6709; <code>^~</code> &#x4FEE;&#x6B63;&#x7B26;&#xFF0C;&#x5219;&#x4E0D;&#x68C0;&#x67E5;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x4F7F;&#x7528; <code>=</code> &#x4FEE;&#x6B63;&#x7B26;&#x53EF;&#x4EE5;&#x4F7F; URI &#x548C; location &#x7684;&#x5339;&#x914D;&#x7CBE;&#x786E;&#x3002;&#x5982;&#x679C;&#x627E;&#x5230;&#x5B8C;&#x5168;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x641C;&#x7D22;&#x7ED3;&#x675F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C; <code>/</code> &#x8BF7;&#x6C42;&#x9891;&#x7E41;&#xFF0C;&#x90A3;&#x4E48;&#x5B9A;&#x4E49; <code>location=/</code> &#x4F1A;&#x52A0;&#x5FEB;&#x8FD9;&#x4E9B;&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#x901F;&#x5EA6;&#xFF0C;&#x56E0;&#x4E3A;&#x641C;&#x7D22;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x6BD4;&#x8F83;&#x4E4B;&#x540E;&#x4F1A;&#x7ACB;&#x5373;&#x7EC8;&#x6B62;&#x3002;&#x8FD9;&#x6837;&#x7684; location &#x4E0D;&#x80FD;&#x5305;&#x542B;&#x5D4C;&#x5957; location&#x3002;</p>
<blockquote>
<p>&#x4ECE; 0.7.1 &#x5230; 0.8.41 &#x7248;&#x672C;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4E0E;&#x6CA1;&#x6709; <code>=</code> &#x548C; <code>^~</code> &#x4FEE;&#x6B63;&#x7B26;&#x7684;&#x524D;&#x7F00; location &#x5339;&#x914D;&#xFF0C;&#x5219;&#x641C;&#x7D22;&#x4E5F;&#x4F1A;&#x7EC8;&#x6B62;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x518D;&#x68C0;&#x67E5;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</p>
</blockquote>
<p>&#x4E0B;&#x9762;&#x4E3E;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x8BF4;&#x660E;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> configuration A <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> configuration B <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">/</span>documents<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> configuration C <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">^</span><span class="token operator">~</span> <span class="token operator">/</span>images<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> configuration D <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">~</span><span class="token operator">*</span> \<span class="token punctuation">.</span><span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    <span class="token punctuation">[</span> configuration E <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>/</code> &#x8BF7;&#x6C42;&#x5C06;&#x4E0E;&#x914D;&#x7F6E; A &#x5339;&#x914D;&#xFF0C;<code>/index.html</code> &#x8BF7;&#x6C42;&#x5C06;&#x5339;&#x914D;&#x914D;&#x7F6E; B&#xFF0C;<code>/documents/document.html</code> &#x8BF7;&#x6C42;&#x5C06;&#x5339;&#x914D;&#x914D;&#x7F6E; C&#xFF0C;<code>/images/1.gif</code> &#x8BF7;&#x6C42;&#x5C06;&#x5339;&#x914D;&#x914D;&#x7F6E; D&#xFF0C;<code>/documents/1.jpg</code> &#x8BF7;&#x6C42;&#x5C06;&#x5339;&#x914D;&#x914D;&#x7F6E; E&#x3002;</p>
<p><code>@</code> &#x524D;&#x7F00;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x547D;&#x540D; location&#x3002;&#x8FD9;&#x6837;&#x7684; location &#x4E0D;&#x7528;&#x4E8E;&#x5E38;&#x89C4;&#x7684;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x662F;&#x7528;&#x4E8E;&#x8BF7;&#x6C42;&#x91CD;&#x5B9A;&#x5411;&#x3002;&#x5B83;&#x4EEC;&#x4E0D;&#x80FD;&#x5D4C;&#x5957;&#xFF0C;&#x4E5F;&#x4E0D;&#x80FD;&#x5305;&#x542B;&#x5D4C;&#x5957;&#x7684; location&#x3002;</p>
<p>&#x5982;&#x679C;&#x67D0;&#x4E2A; location &#x7531;&#x4EE5;&#x659C;&#x6760;&#x5B57;&#x7B26;&#x7ED3;&#x5C3E;&#x7684;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x5B9A;&#x4E49;&#xFF0C;&#x5E76;&#x4E14;&#x8BF7;&#x6C42;&#x7531; <a href="ngx_http_proxy_module.html#proxy_pass">proxy_pass</a>&#x3001;<a href="ngx_http_fastcgi_module.html#fastcgi_pass">fastcgi_pass</a>&#x3001;<a href="ngx_http_uwsgi_module.html#uwsgi_pass">uwsgi_pass</a>&#x3001;<a href="ngx_http_scgi_module.html#scgi_pass">scgi_pass</a> &#x6216; <a href="ngx_http_memcached_module.html#memcached_pass">memcached_pa&#x200B;&#x200B;ss</a> &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5219;&#x4F1A;&#x6267;&#x884C;&#x7279;&#x6B8A;&#x5904;&#x7406;&#x3002;&#x4E3A;&#x4E86;&#x54CD;&#x5E94; URI &#x4E3A;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x6CA1;&#x6709;&#x4EE5;&#x659C;&#x6760;&#x7ED3;&#x5C3E;&#xFF0C;&#x5E26;&#x6709; 301 &#x4EE3;&#x7801;&#x7684;&#x6C38;&#x4E45;&#x91CD;&#x5B9A;&#x5411;&#x5C06;&#x8FD4;&#x56DE;&#x6240;&#x8BF7;&#x6C42;&#x7684; URI&#xFF0C;&#x5E76;&#x9644;&#x4E0A;&#x659C;&#x7EBF;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x50CF;&#x4EE5;&#x4E0B;&#x8FD9;&#x6837;&#x5B9A;&#x4E49; URI &#x548C; location &#x7684;&#x7CBE;&#x786E;&#x5339;&#x914D;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span><span class="token keyword">user</span><span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token keyword">user</span><span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token keyword">user</span> <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>login<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="lognotfound">log_not_found</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>log_not_found</strong> `on \</td>
<td>off`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">log_not_found on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5C06;&#x6587;&#x4EF6;&#x672A;&#x627E;&#x5230;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;&#x5230; <a href="#error_log">error_log</a> &#x4E2D;&#x3002;</p>
<h3 id="logsubrequest">log_subrequest</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>log_subrequest</strong> `on \</td>
<td>off`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">log_subrequest off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5C06;&#x5B50;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;&#x5230; <a href="ngx_http_log_module.html#access_log">access_log</a> &#x4E2D;&#x3002;</p>
<h3 id="maxranges">max_ranges</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>merge_slashes</strong> <code>number</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x63D0;&#x793A;</strong></td>
<td style="text-align:left">&#x8BE5;&#x6307;&#x4EE4;&#x5728; 1.1.2 &#x7248;&#x672C;&#x4E2D;&#x51FA;&#x73B0;</td>
</tr>
</tbody>
</table>
<p>&#x9650;&#x5236; byte-range &#x8BF7;&#x6C42;&#x4E2D;&#x5141;&#x8BB8;&#x7684;&#x6700;&#x5927;&#x8303;&#x56F4;&#x6570;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5B57;&#x8282;&#x8303;&#x56F4;&#xFF0C;&#x5219;&#x5904;&#x7406;&#x8D85;&#x51FA;&#x9650;&#x5236;&#x7684;&#x8BF7;&#x6C42;&#x3002; &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8303;&#x56F4;&#x7684;&#x6570;&#x91CF;&#x4E0D;&#x53D7;&#x9650;&#x5236;&#x3002;&#x96F6;&#x503C;&#x5C06;&#x5B8C;&#x5168;&#x7981;&#x7528; byte-range &#x652F;&#x6301;&#x3002;</p>
<h3 id="mergeslashes">merge_slashes</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>merge_slashes</strong> `on \</td>
<td>off`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">merge_slashes on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5C06; URI &#x4E2D;&#x4E24;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x76F8;&#x90BB;&#x659C;&#x7EBF;&#x538B;&#x7F29;&#x4E3A;&#x5355;&#x659C;&#x7EBF;&#x3002;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x538B;&#x7F29;&#x5BF9;&#x4E8E;&#x6B63;&#x786E;&#x5339;&#x914D;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684; location &#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x6CA1;&#x6709;&#x5B83;&#xFF0C;&#x5C06;&#x4E0D;&#x5339;&#x914D; <code>//scripts/one.php</code> &#x8BF7;&#x6C42;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>scripts<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5E76;&#x53EF;&#x80FD;&#x88AB;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x5904;&#x7406;&#x3002;&#x56E0;&#x6B64;&#x5B83;&#x9700;&#x8981;&#x88AB;&#x8F6C;&#x6362;&#x6210; <code>/scripts/one.php</code>&#x3002;</p>
<p>&#x56E0;&#x4E3A; base64 &#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528; <code>/</code> &#x5B57;&#x7B26;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C; URI &#x5305;&#x542B; base64 &#x7F16;&#x7801;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5173;&#x95ED;&#x538B;&#x7F29;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x8003;&#x8651;&#xFF0C;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x5173;&#x95ED;&#x538B;&#x7F29;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8BE5;&#x6307;&#x4EE4;&#x662F;&#x5728; <a href="#server">server</a> &#x7EA7;&#x522B;&#x6307;&#x5B9A;&#x7684;&#xFF0C;&#x5219;&#x4EC5;&#x5728; server &#x662F;&#x9ED8;&#x8BA4; server &#x65F6;&#x624D;&#x4F7F;&#x7528;&#x8BE5;&#x6307;&#x4EE4;&#x3002;&#x6307;&#x5B9A;&#x7684;&#x503C;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x76D1;&#x542C;&#x76F8;&#x540C;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x7684;&#x6240;&#x6709;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<h3 id="msiepadding">msie_padding</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>msie_padding</strong> `on \</td>
<td>off`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">msie_padding on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5411;&#x72B6;&#x6001;&#x8D85;&#x8FC7; 400 &#x7684; MSIE &#x5BA2;&#x6237;&#x7AEF;&#x54CD;&#x5E94;&#x6DFB;&#x52A0;&#x6CE8;&#x91CA;&#x4EE5;&#x5C06;&#x54CD;&#x5E94;&#x5927;&#x5C0F;&#x589E;&#x52A0;&#x5230; 512 &#x5B57;&#x8282;&#x3002;</p>
<h3 id="msierefresh">msie_refresh</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>msie_refresh</strong> `on \</td>
<td>off`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">msie_refresh off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x53D1;&#x5E03;&#x5237;&#x65B0;&#x66FF;&#x4EE3; MSIE &#x5BA2;&#x6237;&#x7AEF;&#x91CD;&#x5B9A;&#x5411;&#x3002;</p>
<h3 id="openfilecache">open_file_cache</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>open_file_cache</strong> <code>off</code>; <br> <strong>open_file_cache</strong> <code>max=N [inactive=time]</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">open_file_cache off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#xFF1A;</p>
<ul>
<li>&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x3001;&#x5927;&#x5C0F;&#x548C;&#x4FEE;&#x6539;&#x65F6;&#x95F4;</li>
<li>&#x6709;&#x5173;&#x76EE;&#x5F55;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4FE1;&#x606F;</li>
<li>&#x6587;&#x4EF6;&#x67E5;&#x627E;&#x9519;&#x8BEF;&#xFF0C;&#x5982;<strong>&#x627E;&#x4E0D;&#x5230;&#x6587;&#x4EF6;</strong>&#x3001;<strong>&#x6CA1;&#x6709;&#x8BFB;&#x53D6;&#x6743;&#x9650;</strong>&#x7B49;</li>
</ul>
<blockquote>
<p>&#x5E94;&#x8BE5;&#x901A;&#x8FC7; <a href="#open_file_cache_errors">open_file_cache_errors</a> &#x6307;&#x4EE4;&#x5206;&#x522B;&#x542F;&#x7528;&#x7F13;&#x5B58;&#x9519;&#x8BEF;&#x3002;</p>
</blockquote>
<p>&#x8BE5;&#x6307;&#x4EE4;&#x6709;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#xFF1A;</p>
<ul>
<li><p><code>max</code></p>
<p>  &#x8BBE;&#x7F6E;&#x7F13;&#x5B58;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x3002;&#x5728;&#x7F13;&#x5B58;&#x6EA2;&#x51FA;&#x65F6;&#xFF0C;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#xFF08;LRU&#xFF09;&#x5143;&#x7D20;&#x5C06;&#x88AB;&#x79FB;&#x9664;</p>
</li>
<li><p><code>inactive</code></p>
<p>  &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#xFF0C;&#x5143;&#x7D20;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x5C06;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 60 &#x79D2;</p>
</li>
<li><p><code>off</code></p>
<p>  &#x7981;&#x7528;&#x7F13;&#x5B58;</p>
</li>
</ul>
<p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">open_file_cache</span>          max<span class="token operator">=</span><span class="token number">1000</span> inactive<span class="token operator">=</span><span class="token number">20</span>s<span class="token punctuation">;</span>
<span class="token keyword">open_file_cache_valid</span>    <span class="token number">30</span>s<span class="token punctuation">;</span>
<span class="token keyword">open_file_cache_min_uses</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">open_file_cache_errors</span>   on<span class="token punctuation">;</span>
</code></pre>
<h3 id="openfilecacheerrors">open_file_cache_errors</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>open_file_cache_errors</strong> <code>off</code> \</td>
<td><code>on</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">open_file_cache_errors off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x901A;&#x8FC7; <a href="#open_file_cache">open_file_cache</a> &#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x6587;&#x4EF6;&#x67E5;&#x627E;&#x9519;&#x8BEF;&#x7F13;&#x5B58;&#x3002;</p>
<h3 id="openfilecacheminuses">open_file_cache_min_uses</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>open_file_cache_min_uses</strong> <code>number</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">open_file_cache_min_uses 1;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x7531; <a href="#open_file_cache">open_file_cache</a> &#x6307;&#x4EE4;&#x7684; <code>inactive</code> &#x53C2;&#x6570;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#x6587;&#x4EF6;&#x8BBF;&#x95EE;&#x7684;&#x6700;&#x5C0F; <code>number</code> &#xFF08;&#x6B21;&#x6570;&#xFF09;&#xFF0C;&#x8FD9;&#x662F;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x4FDD;&#x6301;&#x6253;&#x5F00;&#x72B6;&#x6001;&#x6240;&#x5FC5;&#x9700;&#x7684;&#x3002;</p>
<h3 id="openfilecachevalid">open_file_cache_valid</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>open_file_cache_valid</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">open_file_cache_valid 60s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E; <a href="#open_file_cache">open_file_cache</a> &#x5143;&#x7D20;&#x5E94;&#x8BE5;&#x9A8C;&#x8BC1;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>
<h3 id="outputbuffers">output_buffers</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>output_buffers</strong> <code>number size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">output_buffers 2 32k;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x4ECE;&#x78C1;&#x76D8;&#x8BFB;&#x53D6;&#x54CD;&#x5E94;&#x7F13;&#x51B2;&#x533A;&#x7684; <code>number</code> &#xFF08;&#x6570;&#x91CF;&#xFF09;&#x548C; <code>size</code> &#xFF08;&#x5927;&#x5C0F;&#xFF09;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.9.5 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x662F; <code>1 32k</code>&#x3002;</p>
</blockquote>
<h3 id="portinredirect">port_in_redirect</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>port_in_redirect</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">port_in_redirect on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x6307;&#x5B9A;&#x7531; nginx &#x53D1;&#x51FA;&#x7684;<a href="#absolute_redirect">&#x7EDD;&#x5BF9;</a>&#x91CD;&#x5B9A;&#x5411;&#x4E2D;&#x7684;&#x7AEF;&#x53E3;&#x3002;</p>
<blockquote>
<p>&#x5728;&#x91CD;&#x5B9A;&#x5411;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x7531; <a href="#server_name_in_redirect">server_name_in_redirect</a> &#x6307;&#x4EE4;&#x63A7;&#x5236;&#x3002;</p>
</blockquote>
<h3 id="postponeoutput">postpone_output</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>postpone_output</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">postpone_output 1460;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684;&#x8BDD;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x6570;&#x636E;&#x7684;&#x4F20;&#x8F93;&#x5C06;&#x88AB;&#x63A8;&#x8FDF;&#xFF0C;&#x76F4;&#x5230; nginx &#x81F3;&#x5C11;&#x6709; <code>size</code> &#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;&#x8981;&#x53D1;&#x9001;&#x3002;&#x96F6;&#x503C;&#x5C06;&#x7981;&#x6B62;&#x5EF6;&#x8FDF;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x3002;</p>
<h3 id="readahead">read_ahead</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>read_ahead</strong> <code>sizef</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">read_ahead 0;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x65F6;&#x5185;&#x6838;&#x7684;&#x9884;&#x8BFB;&#x6570;&#x91CF;&#x3002;</p>
<p>&#x5728; Linux &#x4E0A;&#xFF0C;&#x4F7F;&#x7528; <code>posix_fadvise</code>&#xFF08;<code>0, 0, 0, POSIX_FADV_SEQUENTIAL</code>&#xFF09;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x56E0;&#x6B64; <code>size</code> &#x53C2;&#x6570;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<p>&#x5728; FreeBSD &#x4E0A;&#xFF0C;&#x4F7F;&#x7528;&#x81EA; FreeBSD 9.0-CURRENT &#x540E;&#x652F;&#x6301;&#x7684; <code>fcntl</code>&#xFF08;<code>O_READAHEAD, size</code>&#xFF09;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x3002;FreeBSD 7 &#x9700;&#x8981;<a href="http://sysoev.ru/freebsd/patch.readahead.txt" target="_blank">&#x6253;&#x8865;&#x4E01;</a>&#x3002;</p>
<h3 id="recursiveerrorpages">recursive_error_pages</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>recursive_error_pages</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">reset_timedout_connection off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x4F7F;&#x7528; <a href="#error_page">error_page</a> &#x6307;&#x4EE4;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x91CD;&#x5B9A;&#x5411;&#x3002;&#x8FD9;&#x79CD;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x6570;&#x91CF;&#x662F;<a href="#internal">&#x6709;&#x9650;</a>&#x7684;&#x3002;</p>
<h3 id="requestpoolsize">request_pool_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>request_pool_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">request_pool_size 4k;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x5141;&#x8BB8;&#x7CBE;&#x786E;&#x8C03;&#x6574;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5B58;&#x5206;&#x914D;&#x3002;&#x8BE5;&#x6307;&#x4EE4;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x6700;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="resettimedoutconnection">reset_timedout_connection</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>reset_timedout_connection</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">reset_timedout_connection off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x91CD;&#x7F6E;&#x8D85;&#x65F6;&#x8FDE;&#x63A5;&#x3002;&#x91CD;&#x7F6E;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x3002;&#x5728;&#x5173;&#x95ED;&#x4E00;&#x4E2A;&#x5957;&#x63A5;&#x5B57;&#x4E4B;&#x524D;&#xFF0C;<code>SO_LINGER</code> &#x9009;&#x9879;&#x8D85;&#x65F6;&#x503C;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A; 0&#x3002;&#x5F53;&#x5957;&#x63A5;&#x5B57;&#x5173;&#x95ED;&#x65F6;&#xFF0C;TCP RST &#x88AB;&#x53D1;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5E76;&#x4E14;&#x91CA;&#x653E;&#x8BE5;&#x5957;&#x63A5;&#x5B57;&#x5360;&#x7528;&#x7684;&#x6240;&#x6709;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x907F;&#x514D;&#x957F;&#x65F6;&#x95F4;&#x6301;&#x6709;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x5DF2;&#x7ECF;&#x88AB;&#x586B;&#x5145; FIN_WAIT1 &#x72B6;&#x6001;&#x7684;&#x5DF2;&#x5173;&#x95ED;&#x5957;&#x63A5;&#x5B57;&#x3002;</p>
<p>&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#xFF0C;&#x8D85;&#x65F6;&#x7684; keep-alive &#x8FDE;&#x63A5;&#x88AB;&#x6B63;&#x5E38;&#x5173;&#x95ED;&#x3002;</p>
<h3 id="resolver">resolver</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>resolver</strong> `address ... [valid=time] [ipv6=on</td>
<td>off]`;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5C06;&#x7528;&#x4E8E;&#x89E3;&#x6790; upstream &#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x7684;&#x540D;&#x79F0;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x8FDB;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">resolver</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">5353</span><span class="token punctuation">;</span>
</code></pre>
<p>&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E3A;&#x57DF;&#x540D;&#x6216; IP &#x5730;&#x5740;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x7684;&#x7AEF;&#x53E3;&#xFF08;1.3.1&#xFF0C;1.2.2&#xFF09;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x7AEF;&#x53E3; 53&#x3002;&#x540D;&#x79F0;&#x670D;&#x52A1;&#x5668;&#x4EE5;&#x8F6E;&#x8BE2;&#x65B9;&#x5F0F;&#x67E5;&#x8BE2;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.1.7 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x53EA;&#x80FD;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x540D;&#x79F0;&#x670D;&#x52A1;&#x5668;&#x3002;&#x4ECE; 1.3.1 &#x548C; 1.2.2 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x652F;&#x6301;&#x4F7F;&#x7528; IPv6 &#x5730;&#x5740;&#x6765;&#x6307;&#x5B9A;&#x540D;&#x79F0;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
</blockquote>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;nginx &#x5C06;&#x5728;&#x89E3;&#x6790;&#x65F6;&#x67E5;&#x627E; IPv4 &#x548C; IPv6 &#x5730;&#x5740;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x67E5;&#x627E; IPv6 &#x5730;&#x5740;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x6307;&#x5B9A; <code>ipv6=off</code> &#x53C2;&#x6570;&#x3002;</p>
<blockquote>
<p>&#x4ECE; 1.5.8 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x652F;&#x6301;&#x5C06;&#x540D;&#x79F0;&#x89E3;&#x6790;&#x4E3A; IPv6 &#x5730;&#x5740;&#x3002;</p>
</blockquote>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;nginx &#x4F7F;&#x7528;&#x54CD;&#x5E94;&#x7684; TTL &#x503C;&#x7F13;&#x5B58;&#x56DE;&#x590D;&#x3002;&#x53EF;&#x9009;&#x7684; <code>valid</code> &#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x8986;&#x76D6;&#x5B83;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">resolver</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">5353</span> valid<span class="token operator">=</span><span class="token number">30</span>s<span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>&#x5728; 1.1.9 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x7F13;&#x5B58;&#x65F6;&#x95F4;&#x662F;&#x4E0D;&#x80FD;&#x8C03;&#x6574;&#x7684;&#xFF0C;nginx &#x603B;&#x662F;&#x7F13;&#x5B58; 5 &#x5206;&#x949F;&#x7684;&#x56DE;&#x590D;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x9632;&#x6B62; DNS &#x6B3A;&#x9A97;&#xFF0C;&#x5EFA;&#x8BAE;&#x5728;&#x5B89;&#x5168;&#x7684;&#x53EF;&#x4FE1;&#x4EFB;&#x672C;&#x5730;&#x7F51;&#x7EDC;&#x4E2D;&#x914D;&#x7F6E; DNS &#x670D;&#x52A1;&#x5668;&#x3002;</p>
</blockquote>
<h3 id="satisfy">satisfy</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>satisfy</strong> <code>all</code> \</td>
<td><code>any</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">satisfy all;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5982;&#x679C;&#x6240;&#x6709;&#xFF08;&#x5168;&#x90E8;&#xFF09;&#x6216;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#xFF08;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#xFF09; <a href="ngx_http_access_module.html">ngx_http_access_module</a>&#x3001;<a href="ngx_http_auth_basic_module.html">ngx_http_auth_basic_module</a>&#x3001;<a href="ngx_http_auth_request_module.html">ngx_http_auth_request_module</a> &#x6216; <a href="ngx_http_auth_jwt_module.html">ngx_http_auth_jwt_module</a> &#x6A21;&#x5757;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">satisfy</span> any<span class="token punctuation">;</span>

    <span class="token keyword">allow</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">32</span><span class="token punctuation">;</span>
    <span class="token keyword">deny</span>  all<span class="token punctuation">;</span>

    <span class="token keyword">auth_basic</span>           <span class="token string">&quot;closed site&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">auth_basic_user_file</span> conf<span class="token operator">/</span>htpasswd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="sendlowat">send_lowat</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>send_lowat</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">send_lowat 0;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5982;&#x679C;&#x6307;&#x4EE4;&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x96F6;&#x503C;&#xFF0C;nginx &#x5C06;&#x5C1D;&#x8BD5;&#x901A;&#x8FC7;&#x4F7F;&#x7528; <a href="http://nginx.org/en/docs/events.html#kqueue" target="_blank">kqueue</a> &#x65B9;&#x6CD5;&#x7684; <code>NOTE_LOWAT</code> &#x6807;&#x5FD7;&#x6216;<code>SO_SNDLOWAT</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x6765;&#x6700;&#x5C0F;&#x5316;&#x5BA2;&#x6237;&#x7AEF;&#x5957;&#x63A5;&#x5B57;&#x4E0A;&#x7684;&#x53D1;&#x9001;&#x64CD;&#x4F5C;&#x6570;&#x3002;&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x6307;&#x5B9A;&#x7684; <code>size</code>&#x3002;</p>
<p>&#x8BE5;&#x6307;&#x4EE4;&#x5728; Linux&#x3001;Solaris &#x548C; Windows &#x4E0A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</p>
<h3 id="sendtimeout">send_timeout</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>send_timeout</strong> <code>time</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">send_timeout 60s;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;&#x53EA;&#x9650;&#x5B9A;&#x5728;&#x4E24;&#x6B21;&#x8FDE;&#x7EED;&#x7684;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7528;&#x4E8E;&#x6574;&#x4E2A;&#x54CD;&#x5E94;&#x7684;&#x4F20;&#x8F93;&#x3002;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6B64;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#xFF0C;&#x5219;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5173;&#x95ED;&#x3002;</p>
<h3 id="sendfile">sendfile</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>sendfile</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">sendfile off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location&#x3001;location &#x4E2D;&#x7684; if</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528; <code>sendfile()</code>&#x3002;</p>
<p>&#x4ECE; nginx 0.8.12 &#x548C; FreeBSD 5.2.1 &#x5F00;&#x59CB;&#xFF0C;&#x53EF;&#x4EE5;&#x7528; <a href="#aio">aio</a> &#x6765;&#x4E3A; <code>sendfile()</code> &#x9884;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>video<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">sendfile</span>       on<span class="token punctuation">;</span>
    <span class="token keyword">tcp_nopush</span>     on<span class="token punctuation">;</span>
    <span class="token keyword">aio</span>            on<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;&#x6B64;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; <code>SF_NODISKIO</code> &#x6807;&#x5FD7;&#x8C03;&#x7528; <code>sendfile()</code>&#xFF0C;&#x4F7F;&#x5176;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x78C1;&#x76D8; I/O&#xFF0C;&#x800C;&#x662F;&#x4EE5;&#x62A5;&#x544A;&#x6570;&#x636E;&#x4E0D;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x65B9;&#x5F0F;&#x4EE3;&#x66FF;&#x3002;&#x7136;&#x540E; nginx &#x901A;&#x8FC7;&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x6765;&#x542F;&#x52A8;&#x5F02;&#x6B65;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x3002;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x65F6;&#xFF0C;FreeBSD &#x5185;&#x6838;&#x4F1A;&#x5C06;&#x6587;&#x4EF6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A; 128K &#x5B57;&#x8282;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x4E0B;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x53EA;&#x80FD;&#x4EE5; 16K &#x5757;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="#read_ahead">read_ahead</a> &#x6307;&#x4EE4;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.7.11 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>aio sendfile</code> &#x6765;&#x542F;&#x7528;&#x9884;&#x52A0;&#x8F7D;&#x3002;</p>
</blockquote>
<h3 id="sendfilemaxchunk">sendfile_max_chunk</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>sendfile_max_chunk </strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">sendfile_max_chunk 0;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x96F6;&#x503C;&#x65F6;&#xFF0C;&#x53EF;&#x9650;&#x5236;&#x5355;&#x4E2A; <code>sendfile()</code> &#x8C03;&#x7528;&#x65F6;&#x4F20;&#x8F93;&#x7684;&#x6570;&#x636E;&#x91CF;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x9650;&#x5236;&#xFF0C;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x8FDE;&#x63A5;&#x53EF;&#x80FD;&#x4F1A;&#x5B8C;&#x5168;&#x5360;&#x7528;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x3002;</p>
<h3 id="server">server</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server</strong> <code>{ ... }</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x3002;&#x57FA;&#x4E8E; IP&#xFF08;&#x57FA;&#x4E8E; IP &#x5730;&#x5740;&#xFF09;&#x548C;&#x57FA;&#x4E8E;&#x540D;&#x79F0;&#xFF08;&#x57FA;&#x4E8E; <code>Host</code> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#xFF09;&#x7684;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x6CA1;&#x6709;&#x660E;&#x786E;&#x7684;&#x754C;&#x9650;&#x3002;&#x76F8;&#x53CD;&#xFF0C;<a href="#listen">listen</a> &#x6307;&#x4EE4;&#x63CF;&#x8FF0;&#x5E94;&#x63A5;&#x53D7;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x7684;&#x6240;&#x6709;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#xFF0C;<a href="#server_name">server_name</a> &#x6307;&#x4EE4;&#x5217;&#x51FA;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x3002;<a href="http://nginx.org/en/docs/http/request_processing.html" target="_blank">&#x5982;&#x4F55;&#x5904;&#x7406;&#x8BF7;&#x6C42;</a>&#x6587;&#x6863;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x914D;&#x7F6E;&#x793A;&#x4F8B;&#x3002;</p>
<h3 id="servername">server_name</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server_name</strong> <code>name ...</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">server_name &quot;&quot;;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">server</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> example<span class="token punctuation">.</span>com www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x540D;&#x5B57;&#x5C06;&#x6210;&#x4E3A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x3002;</p>
<p>&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x661F;&#x53F7;&#xFF08;<code>*</code>&#xFF09;&#x4EE5;&#x4EE3;&#x66FF;&#x540D;&#x79F0;&#x7684;&#x7B2C;&#x4E00;&#x90E8;&#x5206;&#x6216;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> example<span class="token punctuation">.</span>com <span class="token operator">*</span><span class="token punctuation">.</span>example<span class="token punctuation">.</span>com www<span class="token punctuation">.</span>example<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD9;&#x6837;&#x7684;&#x540D;&#x79F0;&#x88AB;&#x79F0;&#x4E3A;&#x901A;&#x914D;&#x7B26;&#x540D;&#x79F0;&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x524D;&#x4E24;&#x4E2A;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> <span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x4E2D;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5728;&#x540D;&#x79F0;&#x524D;&#x9762;&#x52A0;&#x4E0A;&#x6CE2;&#x6D6A;&#x53F7;&#xFF08;<code>&#x301C;</code>&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com <span class="token operator">~</span><span class="token operator">^</span>www\d<span class="token operator">+</span>\<span class="token punctuation">.</span>example\<span class="token punctuation">.</span>com$<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4E4B;&#x540E;&#x7528;&#x4E8E;&#x5176;&#x4ED6;&#x6307;&#x4EE4;&#x7684;&#x6355;&#x83B7;&#xFF08;0.7.40&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> <span class="token operator">~</span><span class="token operator">^</span><span class="token punctuation">(</span>www\<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">)</span>$<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>sites<span class="token operator">/</span>$<span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> _<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>sites<span class="token operator">/</span>default<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x4E2D;&#x547D;&#x540D;&#x6355;&#x83B7;&#x521B;&#x5EFA;&#x53D8;&#x91CF;&#xFF08;0.8.25&#xFF09;&#xFF0C;&#x4E4B;&#x540E;&#x53EF;&#x5728;&#x5176;&#x4ED6;&#x6307;&#x4EE4;&#x4E2D;&#x4F7F;&#x7528;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> <span class="token operator">~</span><span class="token operator">^</span><span class="token punctuation">(</span>www\<span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">&lt;</span>domain<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token operator">+</span><span class="token punctuation">)</span>$<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>sites<span class="token operator">/</span><span class="token variable">$domain</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> _<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">root</span> <span class="token operator">/</span>sites<span class="token operator">/</span>default<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5982;&#x679C;&#x6307;&#x4EE4;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A; <code>$hostname</code>&#xFF08;0.9.4&#xFF09;&#xFF0C;&#x5219;&#x5C06;&#x66FF;&#x6362;&#x4E3A;&#x673A;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x3002;</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#xFF08;0.7.11&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">server_name</span> www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5B83;&#x5141;&#x8BB8;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5BF9;&#x7ED9;&#x5B9A;&#x7684; address:port &#x5BF9;&#x5904;&#x7406;&#x6CA1;&#x6709; <code>Host</code> &#x5934;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x670D;&#x52A1;&#x5668;&#x3002;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x3002;</p>
<blockquote>
<p>&#x5728; 0.8.48 &#x4E4B;&#x524D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x673A;&#x5668;&#x7684;&#x4E3B;&#x673A;&#x540D;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x6309;&#x540D;&#x79F0;&#x641C;&#x7D22;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x540D;&#x79F0;&#x4E0E;&#x591A;&#x4E2A;&#x6307;&#x5B9A;&#x53D8;&#x4F53;&#x76F8;&#x5339;&#x914D;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x901A;&#x914D;&#x7B26;&#x540D;&#x79F0;&#x548C;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5339;&#x914D;&#xFF09;&#xFF0C;&#x5C06;&#x6309;&#x7167;&#x4EE5;&#x4E0B;&#x4F18;&#x5148;&#x987A;&#x5E8F;&#x9009;&#x62E9;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x53D8;&#x4F53;&#xFF1A;</p>
<ol>
<li>&#x786E;&#x5207;&#x7684;&#x540D;&#x5B57;</li>
<li>&#x4EE5;&#x661F;&#x53F7;&#x5F00;&#x5934;&#x7684;&#x6700;&#x957F;&#x901A;&#x914D;&#x7B26;&#x540D;&#x79F0;&#xFF0C;&#x4F8B;&#x5982; <code>*.example.com</code></li>
<li>&#x4EE5;&#x661F;&#x53F7;&#x7ED3;&#x5C3E;&#x7684;&#x6700;&#x957F;&#x901A;&#x914D;&#x7B26;&#x540D;&#x79F0;&#xFF0C;&#x4F8B;&#x5982; <code>mail.*</code></li>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF08;&#x6309;&#x7167;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x51FA;&#x73B0;&#x987A;&#x5E8F;&#xFF09;</li>
</ol>
<p>&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x7684;&#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/http/server_names.html" target="_blank">&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;</a>&#x6587;&#x6863;&#x4E2D;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="servernameinredirect">server_name_in_redirect</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server_name</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">server_name_in_redirect off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5728;&#x7531; nginx &#x53D1;&#x51FA;&#x7684; <a href="#absolute_redirect">absolute</a> &#x6307;&#x4EE4;&#x4E2D;&#x4F7F;&#x7528;&#x7531; <a href="#server_name">server_name</a> &#x6307;&#x4EE4;&#x6307;&#x5B9A;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x3002;&#x5F53;&#x7981;&#x7528;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x65F6;&#xFF0C;&#x5C06;&#x4F7F;&#x7528; <code>Host</code> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x7684;&#x540D;&#x79F0;&#x3002;&#x5982;&#x679C;&#x6B64;&#x5B57;&#x6BB5;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684; IP &#x5730;&#x5740;&#x3002;</p>
<p>&#x91CD;&#x5B9A;&#x5411;&#x4E2D;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;&#x7531; <a href="#port_in_redirect">port_in_redirect</a> &#x6307;&#x4EE4;&#x63A7;&#x5236;&#x3002;</p>
<h3 id="servernameshashbucketsize">server_names_hash_bucket_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server_names_hash_bucket_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">server_names_hash_bucket_size 32</td>
<td>64</td>
<td>128;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5B58;&#x50A8;&#x6876;&#x5927;&#x5C0F;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x53D6;&#x51B3;&#x4E8E;&#x5904;&#x7406;&#x5668;&#x7F13;&#x5B58;&#x884C;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/hash.html" target="_blank">&#x6587;&#x6863;</a>&#x4E2D;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="servernameshashmaxsize">server_names_hash_max_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server_names_hash_max_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">server_names_hash_max_size 512;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x6700;&#x5927;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="(http:/nginx.org/en/docs/hash.html">&#x6587;&#x6863;</a>)&#x4E2D;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="servertokens">server_tokens</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>server_tokens</strong> <code>on</code> \</td>
<td><code>off</code> \</td>
<td><code>build</code> \</td>
<td><code>string</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">server_tokens on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x5728;&#x9519;&#x8BEF;&#x9875;&#x9762;&#x548C; <code>Server</code> &#x54CD;&#x5E94;&#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x53D1;&#x9001; nginx &#x7248;&#x672C;&#x3002;</p>
<p><code>build</code> &#x53C2;&#x6570;&#xFF08;1.11.10&#xFF09;&#x80FD;&#x591F;&#x53D1;&#x9001;&#x6784;&#x5EFA;&#x540D;&#x79F0;&#x4EE5;&#x53CA; nginx &#x7248;&#x672C;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x7684;<a href="http://nginx.com/products/?_ga=2.14041591.1300915338.1513355851-1890203964.1497190280" target="_blank">&#x5546;&#x4E1A;&#x8BA2;&#x9605;</a>&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4ECE;1.9.13 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5E26;&#x6709;&#x53D8;&#x91CF;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x663E;&#x5F0F;&#x8BBE;&#x7F6E;&#x9519;&#x8BEF;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x7B7E;&#x540D;&#x548C; <code>Server</code> &#x54CD;&#x5E94;&#x5934;&#x5B57;&#x6BB5;&#x503C;&#x3002;&#x6307;&#x5B9A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x5C06;&#x7981;&#x7528; <code>Server</code> &#x5B57;&#x6BB5;&#x7684;&#x53D1;&#x9001;&#x3002;</p>
<h3 id="tcpnodelay">tcp_nodelay</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>tcp_nodelay</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">tcp_nodelay on;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528; <code>TCP_NODELAY</code> &#x9009;&#x9879;&#x7684;&#x4F7F;&#x7528;&#x3002;&#x8BE5;&#x9009;&#x9879;&#x4EC5;&#x5728;&#x8FDE;&#x63A5;&#x8F6C;&#x6362;&#x5230; keep-alive &#x72B6;&#x6001;&#x65F6;&#x542F;&#x7528;&#x3002;</p>
<h3 id="tcpnopush">tcp_nopush</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>tcp_nopush</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">tcp_nopush off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5728; FreeBSD &#x4E0A;&#x4F7F;&#x7528; <code>TCP_NOPUSH</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x6216;&#x5728; Linux &#x4E0A;&#x4F7F;&#x7528; <code>TCP_CORK</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x3002;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x53EA;&#x6709;&#x5728;&#x4F7F;&#x7528; <a href="#sendfile">sendfile</a> &#x65F6;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#x3002;&#x542F;&#x7528;&#x8BE5;&#x9009;&#x9879;&#x5C06;&#x5141;&#x8BB8;&#xFF1A;</p>
<ul>
<li>&#x5728; Linux &#x548C; FreeBSD 4 &#x4E0A;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x5305;&#x4E2D;&#x53EF;&#x53D1;&#x9001;&#x54CD;&#x5E94;&#x5934;&#x548C;&#x6587;&#x4EF6;&#x5F00;&#x5934;&#x3002;</li>
<li>&#x4EE5;&#x5B8C;&#x6574;&#x5305;&#x7684;&#x65B9;&#x5F0F;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;</li>
</ul>
<h3 id="tryfiles">try_files</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>try_files</strong> <code>file ... uri</code>; <br> <strong>try_files</strong> <code>file ... =code</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">&#x2014;&#x2014;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x4EE5;&#x6307;&#x5B9A;&#x987A;&#x5E8F;&#x68C0;&#x67E5;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x7B2C;&#x4E00;&#x4E2A;&#x627E;&#x5230;&#x7684;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x3002;&#x5904;&#x7406;&#x5C06;&#x5728;&#x5F53;&#x524D;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x6267;&#x884C;&#x3002;&#x6307;&#x5411;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x6839;&#x636E; <a href="#root">root</a> &#x548C; <a href="#alias">alias</a> &#x6307;&#x4EE4;&#x4ECE; <code>file</code> &#x53C2;&#x6570;&#x6784;&#x9020;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;&#x540D;&#x79F0;&#x672B;&#x5C3E;&#x6307;&#x5B9A;&#x659C;&#x7EBF;&#x6765;&#x68C0;&#x67E5;&#x76EE;&#x5F55;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;<code>$URI/</code>&#x3002;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#x4EFB;&#x4F55;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x5185;&#x90E8;&#x91CD;&#x5B9A;&#x5411;&#x5C06;&#x6307;&#x5411;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E2D;&#x6307;&#x5B9A;&#x7684; <code>uri</code>&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span>images<span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token operator">/</span>images<span class="token operator">/</span>default<span class="token punctuation">.</span>gif<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span>images<span class="token operator">/</span>default<span class="token punctuation">.</span>gif <span class="token punctuation">{</span>
    <span class="token keyword">expires</span> <span class="token number">30</span>s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x547D;&#x540D;&#x7684; location &#xFF0C;&#x5982;&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x3002;&#x4ECE; 0.7.51 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A; <code>code</code>&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token variable">$uri</span><span class="token punctuation">.</span>html <span class="token operator">=</span><span class="token number">404</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x4EE3;&#x7406; Mongrel &#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token operator">/</span>system<span class="token operator">/</span>maintenance<span class="token punctuation">.</span>html
              <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token variable">$uri</span><span class="token punctuation">.</span>html
              @mongrel<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> @mongrel <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>mongrel<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Drupal/FastCGI &#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> @drupal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">~</span> \<span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> @drupal<span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_pass</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_param</span> SCRIPT_NAME     <span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_param</span> QUERY_STRING    <span class="token variable">$args</span><span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> other <span class="token keyword">fastcgi_param</span>&apos;s
<span class="token punctuation">}</span>

<span class="token keyword">location</span> @drupal <span class="token punctuation">{</span>
    <span class="token keyword">fastcgi_pass</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_param</span> SCRIPT_NAME     <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>
    <span class="token keyword">fastcgi_param</span> QUERY_STRING    q<span class="token operator">=</span><span class="token variable">$uri</span><span class="token operator">&amp;</span><span class="token variable">$args</span><span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> other <span class="token keyword">fastcgi_param</span>&apos;s
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#x4E2D;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> @drupal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>try_files &#x6307;&#x4EE4;&#x76F8;&#x5F53;&#x4E8E;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">error_page</span> <span class="token number">404</span> <span class="token operator">=</span> @drupal<span class="token punctuation">;</span>
    <span class="token keyword">log_not_found</span> off<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">~</span> \<span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> @drupal<span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_pass</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;&#x5C06;&#x8BF7;&#x6C42;&#x4F20;&#x9012;&#x7ED9; FastCGI &#x670D;&#x52A1;&#x5668;&#x4E4B;&#x524D;&#xFF0C;try_files &#x5C06;&#x68C0;&#x67E5; PHP &#x6587;&#x4EF6;&#x662F;&#x5426;&#x5B58;&#x5728;&#x3002;</p>
<p>Wordpress &#x4E0E; Joomla &#x793A;&#x4F8B;&#xFF1A;</p>
<pre class="language-"><code class="lang-nginx"><span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> @wordpress<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">location</span> <span class="token operator">~</span> \<span class="token punctuation">.</span>php$ <span class="token punctuation">{</span>
    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> @wordpress<span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_pass</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> other <span class="token keyword">fastcgi_param</span>&apos;s
<span class="token punctuation">}</span>

<span class="token keyword">location</span> @wordpress <span class="token punctuation">{</span>
    <span class="token keyword">fastcgi_pass</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

    <span class="token keyword">fastcgi_param</span> SCRIPT_FILENAME <span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> other <span class="token keyword">fastcgi_param</span>&apos;s
<span class="token punctuation">}</span>
</code></pre>
<h3 id="typeshashbucketsize">types_hash_bucket_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>types_hash_bucket_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">types_hash_bucket_size 64;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x7C7B;&#x578B;&#x54C8;&#x5E0C;&#x8868;&#x6876;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/hash.html" target="_blank">&#x6587;&#x6863;</a>&#x4E2D;&#x6709;&#x63D0;&#x4F9B;&#x3002;</p>
<blockquote>
<p>&#x5728;&#x7248; 1.5.13 &#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x53D6;&#x51B3;&#x4E8E;&#x5904;&#x7406;&#x5668;&#x7F13;&#x5B58;&#x884C;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
</blockquote>
<h3 id="typeshashmaxsize">types_hash_max_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>types_hash_max_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">types_hash_max_size 1024;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server&#x3001;location</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x7C7B;&#x578B;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x6700;&#x5927;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/hash.html" target="_blank">&#x6587;&#x6863;</a>&#x4E2D;&#x6709;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="underscoresinheaders">underscores_in_headers</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>underscores_in_headers</strong> <code>on</code> \</td>
<td><code>off</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">underscores_in_headers off;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http&#x3001;server</td>
</tr>
</tbody>
</table>
<p>&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x4E2D;&#x4F7F;&#x7528;&#x4E0B;&#x5212;&#x7EBF;&#x3002;&#x5F53;&#x7981;&#x7528;&#x4E0B;&#x5212;&#x7EBF;&#x65F6;&#xFF0C;&#x540D;&#x79F0;&#x4E2D;&#x5305;&#x542B;&#x4E0B;&#x5212;&#x7EBF;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x5C06;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x65E0;&#x6548;&#xFF0C;&#x5E76;&#x53D7;&#x5236;&#x4E8E; <a href="#ignore_invalid_headers">ignore_invalid_headers</a> &#x6307;&#x4EE4;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8BE5;&#x6307;&#x4EE4;&#x662F;&#x5728; <a href="#server">server</a> &#x7EA7;&#x522B;&#x6307;&#x5B9A;&#xFF0C;&#x5219;&#x4EC5;&#x5728; server &#x662F;&#x9ED8;&#x8BA4; server &#x65F6;&#x624D;&#x4F7F;&#x7528;&#x8BE5;&#x6307;&#x4EE4;&#x3002;&#x6307;&#x5B9A;&#x7684;&#x503C;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x76D1;&#x542C;&#x76F8;&#x540C;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x7684;&#x6240;&#x6709;&#x865A;&#x62DF;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<h3 id="variableshashbucketsize">variables_hash_bucket_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>variables_hash_bucket_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">variables_hash_bucket_size size;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;&#x54C8;&#x5E0C;&#x8868;&#x6876;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/hash.html" target="_blank">&#x6587;&#x6863;</a>&#x4E2D;&#x6709;&#x63D0;&#x4F9B;&#x3002;</p>
<h3 id="variableshashmaxsize">variables_hash_max_size</h3>
<table>
<thead>
<tr>
<th style="text-align:left">-</th>
<th style="text-align:left">&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>&#x8BED;&#x6CD5;</strong></td>
<td style="text-align:left"><strong>variables_hash_max_size</strong> <code>size</code>;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x9ED8;&#x8BA4;</strong></td>
<td style="text-align:left">variables_hash_max_size  1024;</td>
</tr>
<tr>
<td style="text-align:left"><strong>&#x4E0A;&#x4E0B;&#x6587;</strong></td>
<td style="text-align:left">http</td>
</tr>
</tbody>
</table>
<p>&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;&#x54C8;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x6700;&#x5927;&#x5927;&#x5C0F;&#x3002;&#x8BBE;&#x7F6E;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x7EC6;&#x8282;&#x5728;&#x5355;&#x72EC;&#x7684;<a href="http://nginx.org/en/docs/hash.html" target="_blank">&#x6587;&#x6863;</a>&#x4E2D;&#x6709;&#x63D0;&#x4F9B;&#x3002;</p>
<blockquote>
<p>&#x5728; 1.5.13 &#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x662F; 512&#x3002;</p>
</blockquote>
<p><a id="embedded_variables"></a></p>
<h2 id="&#x5185;&#x5D4C;&#x53D8;&#x91CF;">&#x5185;&#x5D4C;&#x53D8;&#x91CF;</h2>
<p><code>ngx_http_core_module</code> &#x6A21;&#x5757;&#x652F;&#x6301;&#x5D4C;&#x5165;&#x5F0F;&#x53D8;&#x91CF;&#x540D;&#x79F0;&#x4E0E; Apache &#x670D;&#x52A1;&#x5668;&#x53D8;&#x91CF;&#x5339;&#x914D;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x8FD9;&#x4E9B;&#x662F;&#x51FA;&#x73B0;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x4F8B;&#x5982; <code>$http_user_agent</code>&#x3001;<code>$http_cookie</code> &#x7B49;&#x7B49;&#x3002;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x53D8;&#x91CF;&#xFF1A;</p>
<ul>
<li><p><code>$arg_name</code></p>
<p>  &#x8BF7;&#x6C42;&#x884C;&#x4E2D;&#x7684; <code>name</code> &#x53C2;&#x6570;</p>
</li>
<li><p><code>$args</code></p>
<p>  &#x8BF7;&#x6C42;&#x884C;&#x4E2D;&#x7684;&#x53C2;&#x6570;</p>
</li>
<li><p><code>$binary_remote_addr</code></p>
<p>  &#x5BA2;&#x6237;&#x7AEF;&#x5730;&#x5740;&#x4EE5;&#x4E8C;&#x8FDB;&#x5236;&#x5F62;&#x5F0F;&#x8868;&#x793A;&#xFF0C;&#x503C;&#x7684;&#x957F;&#x5EA6;&#x5BF9;&#x4E8E; IPv4 &#x5730;&#x5740;&#x603B;&#x662F; 4 &#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x5BF9;&#x4E8E; IPv6 &#x5730;&#x5740;&#x603B;&#x662F; 16 &#x4E2A;&#x5B57;&#x8282;</p>
</li>
<li><p><code>$body_bytes_sent</code></p>
<p>  &#x53D1;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x54CD;&#x5E94;&#x5934;&#x3002;&#x6B64;&#x53D8;&#x91CF;&#x4E0E; <code>mod_log_config</code> Apache &#x6A21;&#x5757;&#x7684; <code>&#xFF05;B</code> &#x53C2;&#x6570;&#x517C;&#x5BB9;</p>
</li>
<li><p><code>$bytes_sent</code></p>
<p>  &#x53D1;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF08;1.3.8&#x3001;1.2.5&#xFF09;</p>
</li>
<li><p>$connection</p>
<p>  &#x8FDE;&#x63A5;&#x5E8F;&#x5217;&#x53F7;&#xFF08;1.3.8&#x3001;1.2.5&#xFF09;</p>
</li>
<li><p><code>$connection_requests</code></p>
<p>  &#x5F53;&#x524D;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#xFF08;1.3.8&#x3001;1.2.5&#xFF09;</p>
</li>
<li><p><code>$connect_length</code></p>
<p>  <code>Content-Length</code> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;</p>
</li>
<li><p><code>$content_type</code></p>
<p>  <code>Content-Type</code> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;</p>
</li>
<li><p><code>$cookie_name</code></p>
<p>  &#x540D;&#x79F0;&#x4E3A; <code>name</code> &#x7684; cookie</p>
</li>
<li><p><code>$document_root</code></p>
<p>  &#x6839;&#x76EE;&#x5F55;&#x6216;&#x522B;&#x540D;&#x6307;&#x4EE4;&#x7684;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x7684;&#x503C;</p>
</li>
<li><p><code>$document_uri</code></p>
<p>  &#x4E0E; <code>$uri</code> &#x76F8;&#x540C;</p>
</li>
<li><p><code>$host</code></p>
<p>  &#x6309;&#x7167;&#x4EE5;&#x4E0B;&#x4F18;&#x5148;&#x987A;&#x5E8F;&#xFF1A;&#x6765;&#x81EA;&#x8BF7;&#x6C42;&#x884C;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x6765;&#x81EA; <code>Host</code> &#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;&#x7684;&#x4E3B;&#x673A;&#x540D;&#xFF0C;&#x6216;&#x4E0E;&#x8BF7;&#x6C42;&#x5339;&#x914D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x540D;</p>
</li>
<li><p><code>$hostname</code></p>
<p>  &#x4E3B;&#x673A;&#x540D;</p>
</li>
<li><p><code>$http_name</code></p>
<p>  &#x4EFB;&#x610F;&#x8BF7;&#x6C42;&#x5934;&#x5B57;&#x6BB5;,&#x53D8;&#x91CF;&#x540D;&#x79F0;&#x7684;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x5C06;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x8F6C;&#x6362;&#x4E3A;&#x5C0F;&#x5199;&#xFF0C;&#x5E76;&#x7528;&#x7834;&#x6298;&#x53F7;&#x66FF;&#x6362;&#x4E3A;&#x4E0B;&#x5212;&#x7EBF;</p>
</li>
<li><p><code>$https</code></p>
<p>  &#x5982;&#x679C;&#x8FDE;&#x63A5;&#x4EE5; SSL &#x6A21;&#x5F0F;&#x8FD0;&#x884C;&#xFF0C;&#x5219;&#x4E3A; <code>on</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</p>
</li>
<li><p><code>$is_args</code></p>
<p>  &#x5982;&#x679C;&#x8BF7;&#x6C42;&#x884C;&#x6709;&#x53C2;&#x6570;&#x5219;&#x4E3A; <code>?</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</p>
</li>
<li><p><code>$limit_rate</code></p>
<p>  &#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x54CD;&#x5E94;&#x901F;&#x7387;&#x9650;&#x5236;&#xFF0C;&#x89C1; <a href="#limit_rate">limit_rate</a></p>
</li>
<li><p><code>$msec</code></p>
<p>  &#x5F53;&#x524D;&#x65F6;&#x95F4;&#x4EE5;&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#xFF08;1.3.9&#x3001;1.2.6&#xFF09;</p>
</li>
<li><p><code>$nginx_version</code></p>
<p>  nginx &#x7248;&#x672C;</p>
</li>
<li><p><code>$pid</code></p>
<p>  &#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#x7684; PID</p>
</li>
<li><p><code>$pipe</code></p>
<p>  &#x5982;&#x679C;&#x8BF7;&#x6C42;&#x662F;&#x7BA1;&#x9053;&#x6A21;&#x5F0F;&#x5219;&#x4E3A; <code>p</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A; <code>.</code>&#xFF08;1.3.12&#x3001;1.2.7&#xFF09;</p>
</li>
<li><p><code>$proxy_protocol_addr</code></p>
<p>  &#x6765;&#x81EA; PROXY &#x534F;&#x8BAE;&#x5934;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5730;&#x5740;&#xFF0C;&#x5426;&#x5219;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF08;1.5.12&#xFF09;</p>
<p>  &#x8981;&#x5728; <a href="#listen">listen</a> &#x6307;&#x4EE4;&#x4E2D;&#x8BBE;&#x7F6E; <code>proxy_protocol</code> &#x53C2;&#x6570;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x542F;&#x7528; PROXY &#x534F;&#x8BAE;&#x3002;</p>
</li>
<li><p><code>$proxy_protocol_port</code>  </p>
<p>  PROXY &#x534F;&#x8BAE;&#x5934;&#x4E2D;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x53E3;&#xFF0C;&#x5426;&#x5219;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF08;1.11.0&#xFF09;</p>
<p>  &#x8981;&#x5728; <a href="#listen">listen</a> &#x6307;&#x4EE4;&#x4E2D;&#x8BBE;&#x7F6E; <code>proxy_protocol</code> &#x53C2;&#x6570;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x542F;&#x7528; PROXY &#x534F;&#x8BAE;&#x3002;</p>
</li>
<li><p><code>$query_string</code></p>
<p>  &#x4E0E; <code>$args</code> &#x76F8;&#x540C;</p>
</li>
<li><p><code>$realpath_root</code></p>
<p>  &#x4E0E;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x7684; <a href="#root">root</a> &#x6216; <a href="#alias">alias</a> &#x6307;&#x4EE4;&#x503C;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;&#x540D;&#xFF0C;&#x6240;&#x6709;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x90FD;&#x5C06;&#x89E3;&#x6790;&#x4E3A;&#x5B9E;&#x9645;&#x8DEF;&#x5F84;</p>
</li>
<li><p><code>$remote_addr</code></p>
<p>  &#x5BA2;&#x6237;&#x7AEF;&#x5730;&#x5740;</p>
</li>
<li><p><code>$remote_port</code></p>
<p>  &#x5BA2;&#x6237;&#x7AEF;&#x7AEF;&#x53E3;</p>
</li>
<li><p><code>$remote_user</code></p>
<p>  &#x57FA;&#x672C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x63D0;&#x4F9B;&#x7684;&#x7528;&#x6237;&#x540D;</p>
</li>
<li><p><code>$request</code></p>
<p>  &#x5B8C;&#x6574;&#x7684;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x884C;</p>
</li>
<li><p><code>$request_body</code></p>
<p>  &#x8BF7;&#x6C42;&#x6B63;&#x6587;</p>
<p>  &#x5F53;&#x8BF7;&#x6C42;&#x6B63;&#x6587;&#x88AB;&#x8BFB;&#x53D6;&#x5230;<a href="#client_body_buffer_size">&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;</a>&#x65F6;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x5728;&#x7531;<a href="gx_http_proxy_module.md#proxy_pass">proxy_pass</a>&#x3001;<a href="ngx_http_fastcgi_module.html#fastcgi_pass">fastcgi_pass</a>&#x3001;<a href="ngx_http_uwsgi_module.html#uwsgi_pass">uwsgi_pass</a> &#x548C; <a href="ngx_http_scgi_module.html#scgi_pass">scgi_pass</a> &#x6307;&#x4EE4;&#x5904;&#x7406;&#x7684; location &#x4E2D;&#x53EF;&#x7528;&#x3002;</p>
</li>
<li><p><code>$request_body_file</code></p>
<p>  &#x5E26;&#x6709;&#x8BF7;&#x6C42;&#x6B63;&#x6587;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;</p>
<p>  &#x5728;&#x5904;&#x7406;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x6587;&#x4EF6;&#x9700;&#x8981;&#x88AB;&#x5220;&#x9664;&#x3002;&#x60F3;&#x59CB;&#x7EC8;&#x5C06;&#x8BF7;&#x6C42;&#x4E3B;&#x4F53;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x542F;&#x7528; <a href="#client_body_in_file_only">client_body_in_file_only</a>&#x3002;&#x5F53;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#x5728;&#x4EE3;&#x7406;&#x8BF7;&#x6C42;&#x4E2D;&#x6216;&#x5728;&#x5411; FastCGI/uwsgi/SCGI &#x670D;&#x52A1;&#x5668;&#x7684;&#x8BF7;&#x6C42;&#x4E2D;&#x4F20;&#x9012;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x5206;&#x522B;&#x901A;&#x8FC7; <a href="ngx_http_proxy_module.html#proxy_pass_request_body">proxy_pass_request_body off</a>&#x3001;<a href="ngx_http_fastcgi_module.html#fastcgi_pass_request_body">fastcgi_pass_request_body off</a>&#x3001;<a href="ngx_http_uwsgi_module.html#uwsgi_pass_request_body">uwsgi_pass_request_body off</a> &#x6216; <a href="ngx_http_scgi_module.html#scgi_pass_request_body">scgi_pass_request_body off</a> &#x6307;&#x4EE4;&#x7981;&#x7528;&#x4F20;&#x9012;&#x8BF7;&#x6C42;&#x6B63;&#x6587;&#x3002;</p>
</li>
<li><p><code>$request_completion</code></p>
<p>  &#x5982;&#x679C;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>OK</code>&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</p>
</li>
<li><p><code>$request_filename</code></p>
<p>  &#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#xFF0C;&#x57FA;&#x4E8E; <a href="#root">root</a> &#x6216; <a href="#alias">alias</a> &#x6307;&#x4EE4;&#x4EE5;&#x53CA;&#x8BF7;&#x6C42; URI</p>
</li>
<li><p><code>$request_id</code></p>
<p>  &#x7531; 16 &#x4E2A;&#x968F;&#x673A;&#x5B57;&#x8282;&#x751F;&#x6210;&#x7684;&#x552F;&#x4E00;&#x8BF7;&#x6C42;&#x6807;&#x8BC6;&#x7B26;&#xFF0C;&#x4EE5;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x8868;&#x793A;&#xFF08;1.11.0&#xFF09;</p>
</li>
<li><p><code>$request_length</code></p>
<p>  &#x8BF7;&#x6C42;&#x957F;&#x5EA6;&#xFF08;&#x5305;&#x62EC;&#x8BF7;&#x6C42;&#x884C;&#x3001;&#x5934;&#x90E8;&#x548C;&#x8BF7;&#x6C42;&#x4F53;&#xFF09;&#xFF08;1.3.12&#x3001;1.2.7&#xFF09;</p>
</li>
<li><p><code>$request_method</code></p>
<p>  &#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#xFF0C;&#x901A;&#x5E38;&#x4E3A; <code>GET</code> &#x6216; <code>POST</code></p>
</li>
<li><p><code>$request_time</code></p>
<p>  &#x8BF7;&#x6C42;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x4EE5;&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#xFF08;1.3.9&#x3001;1.2.6&#xFF09;&#x3002;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&#x8BFB;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x65F6;&#x95F4;&#x8D77;</p>
</li>
<li><p><code>$request_uri</code></p>
<p>  &#x5B8C;&#x6574;&#x7684;&#x539F;&#x59CB;&#x8BF7;&#x6C42; URI&#xFF08;&#x5E26;&#x53C2;&#x6570;&#xFF09;</p>
</li>
<li><p><code>$scheme</code></p>
<p>  &#x8BF7;&#x6C42;&#x6A21;&#x5F0F;&#xFF0C;<code>http</code> &#x6216; <code>https</code></p>
</li>
<li><p><code>$sent_http_name</code></p>
<p>  &#x4EFB;&#x610F;&#x54CD;&#x5E94;&#x5934;&#x5B57;&#x6BB5;&#x3002;&#x53D8;&#x91CF;&#x540D;&#x79F0;&#x7684;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x5C06;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x8F6C;&#x6362;&#x4E3A;&#x5C0F;&#x5199;&#xFF0C;&#x5E76;&#x7528;&#x7834;&#x6298;&#x53F7;&#x66FF;&#x6362;&#x4E3A;&#x4E0B;&#x5212;&#x7EBF;</p>
</li>
<li><p><code>$sent_trailer_name</code></p>
<p>  &#x54CD;&#x5E94;&#x7ED3;&#x675F;&#x65F6;&#x53D1;&#x9001;&#x7684;&#x4EFB;&#x610F;&#x5B57;&#x6BB5;&#xFF08;1.13.2&#xFF09;&#x3002;&#x53D8;&#x91CF;&#x540D;&#x79F0;&#x7684;&#x6700;&#x540E;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x5C06;&#x5B57;&#x6BB5;&#x540D;&#x79F0;&#x8F6C;&#x6362;&#x4E3A;&#x5C0F;&#x5199;&#xFF0C;&#x5E76;&#x7528;&#x7834;&#x6298;&#x53F7;&#x66FF;&#x6362;&#x4E3A;&#x4E0B;&#x5212;&#x7EBF;</p>
</li>
<li><p><code>$server_addr</code></p>
<p>  &#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</p>
<p>  &#x901A;&#x5E38;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x6765;&#x8BA1;&#x7B97;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;<a href="#listen">listen</a> &#x6307;&#x4EE4;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x5730;&#x5740;&#x5E76;&#x4F7F;&#x7528; <code>bind</code> &#x53C2;&#x6570;&#x3002;</p>
</li>
<li><p><code>$server_name</code></p>
<p>  &#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;</p>
</li>
<li><p><code>$server_port</code></p>
<p>  &#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53E3;</p>
</li>
<li><p><code>$server_protocol</code></p>
<p>  &#x8BF7;&#x6C42;&#x534F;&#x8BAE;&#xFF0C;&#x901A;&#x5E38;&#x4E3A; <code>HTTP/1.0</code>&#x3001;<code>HTTP/1.1</code> &#x6216; <a href="ngx_http_v2_module.html">HTTP/2.0</a></p>
</li>
<li><p><code>$status</code></p>
<p>  &#x54CD;&#x5E94;&#x72B6;&#x6001;&#xFF08;1.3.2&#x3001;1.2.2&#xFF09;</p>
</li>
<li><p><code>$tcpinfo_rtt</code>&#x3001;<code>$tcpinfo_rttvar</code>&#x3001;<code>$tcpinfo_snd_cwnd</code>&#x3001;<code>$tcpinfo_rcv_space</code></p>
<p>  &#x6709;&#x5173;&#x5BA2;&#x6237;&#x7AEF; TCP &#x8FDE;&#x63A5;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5728;&#x652F;&#x6301; <code>TCP_INFO</code> &#x5957;&#x63A5;&#x5B57;&#x9009;&#x9879;&#x7684;&#x7CFB;&#x7EDF;&#x4E0A;&#x53EF;&#x7528;</p>
</li>
<li><p><code>$time_iso8601</code></p>
<p>  &#x672C;&#x5730;&#x65F6;&#x95F4;&#x91C7;&#x7528; ISO 8601 &#x6807;&#x51C6;&#x683C;&#x5F0F;&#xFF08;1.3.12&#x3001;1.2.7&#xFF09;</p>
</li>
<li><p><code>$time_local</code></p>
<p>  &#x901A;&#x7528;&#x65E5;&#x5FD7;&#x683C;&#x5F0F;&#xFF08;Common Log Format&#xFF09;&#x4E2D;&#x7684;&#x672C;&#x5730;&#x65F6;&#x95F4;&#xFF08;1.3.12&#x3001;1.2.7&#xFF09;</p>
</li>
<li><p><code>$uri</code></p>
<p>  <a href="#location">&#x89C4;&#x8303;&#x5316;</a>&#x8FC7;&#x7684;&#x5F53;&#x524D;&#x8BF7;&#x6C42; URI</p>
<p>  <code>$uri</code> &#x7684;&#x503C;&#x53EF;&#x80FD;&#x5728;&#x8BF7;&#x6C42;&#x671F;&#x95F4;&#x4F1A;&#x6539;&#x53D8;</p>
</li>
</ul>
<h2 id="&#x539F;&#x6587;&#x6863;">&#x539F;&#x6587;&#x6863;</h2>
<p><a href="http://nginx.org/en/docs/http/ngx_http_core_module.html" target="_blank">http://nginx.org/en/docs/http/ngx_http_core_module.html</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="ngx_http_access_module.html" class="navigation navigation-next navigation-unique" aria-label="Next page: ngx_http_access_module">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ngx_http_core_module","level":"1.7.1.1","depth":3,"next":{"title":"ngx_http_access_module","level":"1.7.1.2","depth":3,"path":"模块参考/http/ngx_http_access_module.md","ref":"模块参考/http/ngx_http_access_module.md","articles":[]},"previous":{"title":"HTTP","level":"1.7.1","depth":2,"ref":"","articles":[{"title":"ngx_http_core_module","level":"1.7.1.1","depth":3,"path":"模块参考/http/ngx_http_core_module.md","ref":"模块参考/http/ngx_http_core_module.md","articles":[]},{"title":"ngx_http_access_module","level":"1.7.1.2","depth":3,"path":"模块参考/http/ngx_http_access_module.md","ref":"模块参考/http/ngx_http_access_module.md","articles":[]},{"title":"ngx_http_addition_module","level":"1.7.1.3","depth":3,"path":"模块参考/http/ngx_http_addition_module.md","ref":"模块参考/http/ngx_http_addition_module.md","articles":[]},{"title":"ngx_http_api_module","level":"1.7.1.4","depth":3,"ref":"","articles":[]},{"title":"ngx_http_auth_basic_module","level":"1.7.1.5","depth":3,"path":"模块参考/http/ngx_http_auth_basic_module.md","ref":"模块参考/http/ngx_http_auth_basic_module.md","articles":[]},{"title":"ngx_http_auth_jwt_module","level":"1.7.1.6","depth":3,"path":"模块参考/http/ngx_http_auth_jwt_module.md","ref":"模块参考/http/ngx_http_auth_jwt_module.md","articles":[]},{"title":"ngx_http_auth_request_module","level":"1.7.1.7","depth":3,"path":"模块参考/http/ngx_http_auth_request_module.md","ref":"模块参考/http/ngx_http_auth_request_module.md","articles":[]},{"title":"ngx_http_autoindex_module","level":"1.7.1.8","depth":3,"path":"模块参考/http/ngx_http_autoindex_module.md","ref":"模块参考/http/ngx_http_autoindex_module.md","articles":[]},{"title":"ngx_http_browser_module","level":"1.7.1.9","depth":3,"path":"模块参考/http/ngx_http_browser_module.md","ref":"模块参考/http/ngx_http_browser_module.md","articles":[]},{"title":"ngx_http_charset_module","level":"1.7.1.10","depth":3,"path":"模块参考/http/ngx_http_charset_module.md","ref":"模块参考/http/ngx_http_charset_module.md","articles":[]},{"title":"ngx_http_dav_module","level":"1.7.1.11","depth":3,"path":"模块参考/http/ngx_http_dav_module.md","ref":"模块参考/http/ngx_http_dav_module.md","articles":[]},{"title":"ngx_http_empty_gif_module","level":"1.7.1.12","depth":3,"path":"模块参考/http/ngx_http_empty_gif_module.md","ref":"模块参考/http/ngx_http_empty_gif_module.md","articles":[]},{"title":"ngx_http_f4f_module","level":"1.7.1.13","depth":3,"path":"模块参考/http/ngx_http_f4f_module.md","ref":"模块参考/http/ngx_http_f4f_module.md","articles":[]},{"title":"ngx_http_fastcgi_module","level":"1.7.1.14","depth":3,"path":"模块参考/http/ngx_http_fastcgi_module.md","ref":"模块参考/http/ngx_http_fastcgi_module.md","articles":[]},{"title":"ngx_http_flv_module","level":"1.7.1.15","depth":3,"path":"模块参考/http/ngx_http_flv_module.md","ref":"模块参考/http/ngx_http_flv_module.md","articles":[]},{"title":"ngx_http_geo_module","level":"1.7.1.16","depth":3,"path":"模块参考/http/ngx_http_geo_module.md","ref":"模块参考/http/ngx_http_geo_module.md","articles":[]},{"title":"ngx_http_geoip_module","level":"1.7.1.17","depth":3,"path":"模块参考/http/ngx_http_geoip_module.md","ref":"模块参考/http/ngx_http_geoip_module.md","articles":[]},{"title":"ngx_http_grpc_module","level":"1.7.1.18","depth":3,"path":"模块参考/http/ngx_http_grpc_module.md","ref":"模块参考/http/ngx_http_grpc_module.md","articles":[]},{"title":"ngx_http_gunzip_module","level":"1.7.1.19","depth":3,"path":"模块参考/http/ngx_http_gunzip_module.md","ref":"模块参考/http/ngx_http_gunzip_module.md","articles":[]},{"title":"ngx_http_gzip_module","level":"1.7.1.20","depth":3,"path":"模块参考/http/ngx_http_gzip_module.md","ref":"模块参考/http/ngx_http_gzip_module.md","articles":[]},{"title":"ngx_http_gzip_static_module","level":"1.7.1.21","depth":3,"path":"模块参考/http/ngx_http_gzip_static_module.md","ref":"模块参考/http/ngx_http_gzip_static_module.md","articles":[]},{"title":"ngx_http_headers_module","level":"1.7.1.22","depth":3,"path":"模块参考/http/ngx_http_headers_module.md","ref":"模块参考/http/ngx_http_headers_module.md","articles":[]},{"title":"ngx_http_hls_module","level":"1.7.1.23","depth":3,"path":"模块参考/http/ngx_http_hls_module.md","ref":"模块参考/http/ngx_http_hls_module.md","articles":[]},{"title":"ngx_http_image_filter_module","level":"1.7.1.24","depth":3,"path":"模块参考/http/ngx_http_image_filter_module.md","ref":"模块参考/http/ngx_http_image_filter_module.md","articles":[]},{"title":"ngx_http_index_module","level":"1.7.1.25","depth":3,"path":"模块参考/http/ngx_http_index_module.md","ref":"模块参考/http/ngx_http_index_module.md","articles":[]},{"title":"ngx_http_js_module","level":"1.7.1.26","depth":3,"path":"模块参考/http/ngx_http_js_module.md","ref":"模块参考/http/ngx_http_js_module.md","articles":[]},{"title":"ngx_http_keyval_module","level":"1.7.1.27","depth":3,"path":"模块参考/http/ngx_http_keyval_module.md","ref":"模块参考/http/ngx_http_keyval_module.md","articles":[]},{"title":"ngx_http_limit_conn_module","level":"1.7.1.28","depth":3,"path":"模块参考/http/ngx_http_limit_conn_module.md","ref":"模块参考/http/ngx_http_limit_conn_module.md","articles":[]},{"title":"ngx_http_limit_req_module","level":"1.7.1.29","depth":3,"path":"模块参考/http/ngx_http_limit_req_module.md","ref":"模块参考/http/ngx_http_limit_req_module.md","articles":[]},{"title":"ngx_http_log_module","level":"1.7.1.30","depth":3,"path":"模块参考/http/ngx_http_log_module.md","ref":"模块参考/http/ngx_http_log_module.md","articles":[]},{"title":"ngx_http_map_module","level":"1.7.1.31","depth":3,"path":"模块参考/http/ngx_http_map_module.md","ref":"模块参考/http/ngx_http_map_module.md","articles":[]},{"title":"ngx_http_memcached_module","level":"1.7.1.32","depth":3,"path":"模块参考/http/ngx_http_memcached_module.md","ref":"模块参考/http/ngx_http_memcached_module.md","articles":[]},{"title":"ngx_http_mirror_module","level":"1.7.1.33","depth":3,"path":"模块参考/http/ngx_http_mirror_module.md","ref":"模块参考/http/ngx_http_mirror_module.md","articles":[]},{"title":"ngx_http_mp4_module","level":"1.7.1.34","depth":3,"path":"模块参考/http/ngx_http_mp4_module.md","ref":"模块参考/http/ngx_http_mp4_module.md","articles":[]},{"title":"ngx_http_perl_module","level":"1.7.1.35","depth":3,"path":"模块参考/http/ngx_http_perl_module.md","ref":"模块参考/http/ngx_http_perl_module.md","articles":[]},{"title":"ngx_http_proxy_module","level":"1.7.1.36","depth":3,"path":"模块参考/http/ngx_http_proxy_module.md","ref":"模块参考/http/ngx_http_proxy_module.md","articles":[]},{"title":"ngx_http_random_index_module","level":"1.7.1.37","depth":3,"path":"模块参考/http/ngx_http_random_index_module.md","ref":"模块参考/http/ngx_http_random_index_module.md","articles":[]},{"title":"ngx_http_realip_module","level":"1.7.1.38","depth":3,"path":"模块参考/http/ngx_http_realip_module.md","ref":"模块参考/http/ngx_http_realip_module.md","articles":[]},{"title":"ngx_http_referer_module","level":"1.7.1.39","depth":3,"path":"模块参考/http/ngx_http_referer_module.md","ref":"模块参考/http/ngx_http_referer_module.md","articles":[]},{"title":"ngx_http_rewrite_module","level":"1.7.1.40","depth":3,"path":"模块参考/http/ngx_http_rewrite_module.md","ref":"模块参考/http/ngx_http_rewrite_module.md","articles":[]},{"title":"ngx_http_scgi_module","level":"1.7.1.41","depth":3,"path":"模块参考/http/ngx_http_scgi_module.md","ref":"模块参考/http/ngx_http_scgi_module.md","articles":[]},{"title":"ngx_http_secure_link_module","level":"1.7.1.42","depth":3,"path":"模块参考/http/ngx_http_secure_link_module.md","ref":"模块参考/http/ngx_http_secure_link_module.md","articles":[]},{"title":"ngx_http_session_log_module","level":"1.7.1.43","depth":3,"path":"模块参考/http/ngx_http_session_log_module.md","ref":"模块参考/http/ngx_http_session_log_module.md","articles":[]},{"title":"ngx_http_slice_module","level":"1.7.1.44","depth":3,"path":"模块参考/http/ngx_http_slice_module.md","ref":"模块参考/http/ngx_http_slice_module.md","articles":[]},{"title":"ngx_http_spdy_module（过时）","level":"1.7.1.45","depth":3,"path":"模块参考/http/ngx_http_spdy_module.md","ref":"模块参考/http/ngx_http_spdy_module.md","articles":[]},{"title":"ngx_http_split_clients_module","level":"1.7.1.46","depth":3,"path":"模块参考/http/ngx_http_split_clients_module.md","ref":"模块参考/http/ngx_http_split_clients_module.md","articles":[]},{"title":"ngx_http_ssi_module","level":"1.7.1.47","depth":3,"path":"模块参考/http/ngx_http_ssi_module.md","ref":"模块参考/http/ngx_http_ssi_module.md","articles":[]},{"title":"ngx_http_ssl_module","level":"1.7.1.48","depth":3,"path":"模块参考/http/ngx_http_ssl_module.md","ref":"模块参考/http/ngx_http_ssl_module.md","articles":[]},{"title":"ngx_http_status_module（过时）","level":"1.7.1.49","depth":3,"path":"模块参考/http/ngx_http_status_module.md","ref":"模块参考/http/ngx_http_status_module.md","articles":[]},{"title":"ngx_http_stub_status_module","level":"1.7.1.50","depth":3,"path":"模块参考/http/ngx_http_stub_status_module.md","ref":"模块参考/http/ngx_http_stub_status_module.md","articles":[]},{"title":"ngx_http_sub_module","level":"1.7.1.51","depth":3,"path":"模块参考/http/ngx_http_sub_module.md","ref":"模块参考/http/ngx_http_sub_module.md","articles":[]},{"title":"ngx_http_upstream_module","level":"1.7.1.52","depth":3,"path":"模块参考/http/ngx_http_upstream_module.md","ref":"模块参考/http/ngx_http_upstream_module.md","articles":[]},{"title":"ngx_http_upstream_conf_module","level":"1.7.1.53","depth":3,"path":"模块参考/http/ngx_http_upstream_conf_module.md","ref":"模块参考/http/ngx_http_upstream_conf_module.md","articles":[]},{"title":"ngx_http_upstream_hc_module","level":"1.7.1.54","depth":3,"path":"模块参考/http/ngx_http_upstream_hc_module.md","ref":"模块参考/http/ngx_http_upstream_hc_module.md","articles":[]},{"title":"ngx_http_userid_module","level":"1.7.1.55","depth":3,"path":"模块参考/http/ngx_http_userid_module.md","ref":"模块参考/http/ngx_http_userid_module.md","articles":[]},{"title":"ngx_http_uwsgi_module","level":"1.7.1.56","depth":3,"path":"模块参考/http/ngx_http_uwsgi_module.md","ref":"模块参考/http/ngx_http_uwsgi_module.md","articles":[]},{"title":"ngx_http_v2_module","level":"1.7.1.57","depth":3,"path":"模块参考/http/ngx_http_v2_module.md","ref":"模块参考/http/ngx_http_v2_module.md","articles":[]},{"title":"ngx_http_xslt_module","level":"1.7.1.58","depth":3,"path":"模块参考/http/ngx_http_xslt_module.md","ref":"模块参考/http/ngx_http_xslt_module.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism","favicon"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"favicon":{"shortcut":"favicon.ico","bookmark":"favicon.ico","appleTouch":"favicon.ico","appleTouchMore":{"120x120":"favicon.ico","180x180":"favicon.ico"}},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"DocsHome","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Nginx 文档中文译版","language":"zh-hans","links":{"sidebar":{"Home":"https://github.com/DocsHome"}},"gitbook":"*"},"file":{"path":"模块参考/http/ngx_http_core_module.md","mtime":"2020-03-03T11:48:50.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-03-03T11:49:46.489Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

